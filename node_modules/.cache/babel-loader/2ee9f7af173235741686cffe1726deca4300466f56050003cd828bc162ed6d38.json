{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Validator = void 0;\nconst utils_js_1 = require(\"ethereum-cryptography/utils.js\");\nconst blake2b_js_1 = require(\"ethereum-cryptography/blake2b.js\");\nconst is_my_json_valid_1 = __importDefault(require(\"is-my-json-valid\"));\nconst formats_js_1 = __importDefault(require(\"./formats.js\"));\nconst errors_js_1 = require(\"./errors.js\");\nclass Validator {\n  // eslint-disable-next-line no-useless-constructor, @typescript-eslint/no-empty-function\n  constructor() {\n    this._schemas = new Map();\n  }\n  static factory() {\n    if (!Validator.validatorInstance) {\n      Validator.validatorInstance = new Validator();\n    }\n    return Validator.validatorInstance;\n  }\n  getSchema(key) {\n    return this._schemas.get(key);\n  }\n  addSchema(key, schema) {\n    this._schemas.set(key, this.createValidator(schema));\n  }\n  // eslint-disable-next-line  class-methods-use-this\n  createValidator(schema) {\n    // eslint-disable-next-line  @typescript-eslint/no-unsafe-call\n    // @ts-expect-error validator params correction\n    return (0, is_my_json_valid_1.default)(schema, {\n      formats: formats_js_1.default,\n      greedy: true,\n      verbose: true,\n      additionalProperties: false\n    });\n  }\n  validate(schema, data, options) {\n    const localValidate = this.getOrCreateValidator(schema);\n    if (!localValidate(data)) {\n      const errors = this.convertErrors(localValidate.errors, schema, data);\n      if (errors) {\n        if (options === null || options === void 0 ? void 0 : options.silent) {\n          return errors;\n        }\n        throw new errors_js_1.Web3ValidatorError(errors);\n      }\n    }\n    return undefined;\n  }\n  convertErrors(errors, schema, data) {\n    if (errors && Array.isArray(errors) && errors.length > 0) {\n      return errors.map(error => {\n        let message;\n        let keyword;\n        let params;\n        let schemaPath;\n        schemaPath = Array.isArray(error.schemaPath) ? error.schemaPath.slice(1).join('/') : '';\n        const {\n          field\n        } = error;\n        const _instancePath = schemaPath || (\n        // eslint-disable-next-line no-useless-escape\n        (field === null || field === void 0 ? void 0 : field.length) >= 4 ? `${field.slice(4).replace(/\\\"|\\[|\\]/g, '')}` : '/');\n        const instancePath = _instancePath ? `/${_instancePath}` : '';\n        if ((error === null || error === void 0 ? void 0 : error.message) === 'has less items than allowed') {\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n          const schemaData = this.getObjectValueByPath(schema, schemaPath);\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n          if (schemaData.minItems) {\n            keyword = 'minItems';\n            schemaPath = `${schemaPath}/minItems`;\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\n            params = {\n              limit: schemaData.minItems\n            };\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/restrict-template-expressions\n            message = `must NOT have fewer than ${schemaData.minItems} items`;\n          }\n        } else if ((error === null || error === void 0 ? void 0 : error.message) === 'has more items than allowed') {\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n          const schemaData = this.getObjectValueByPath(schema, schemaPath);\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n          if (schemaData.maxItems) {\n            keyword = 'maxItems';\n            schemaPath = `${schemaPath}/maxItems`;\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\n            params = {\n              limit: schemaData.maxItems\n            };\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/restrict-template-expressions\n            message = `must NOT have more than ${schemaData.maxItems} items`;\n          }\n        } else if ((error === null || error === void 0 ? void 0 : error.message.startsWith('must be')) && (error === null || error === void 0 ? void 0 : error.message.endsWith('format'))) {\n          const formatName = error === null || error === void 0 ? void 0 : error.message.split(' ')[2];\n          if (formatName) {\n            message = `must pass \"${formatName}\" validation`;\n          }\n        }\n        // eslint-disable-next-line  @typescript-eslint/no-unsafe-assignment\n        const dataValue = this.getObjectValueByPath(data, instancePath);\n        return {\n          keyword: keyword !== null && keyword !== void 0 ? keyword : error.field,\n          instancePath,\n          schemaPath: `#${schemaPath}`,\n          // eslint-disable-next-line  @typescript-eslint/no-unsafe-assignment\n          params: params !== null && params !== void 0 ? params : {\n            value: dataValue\n          },\n          message: message !== null && message !== void 0 ? message : error.message\n        };\n      });\n    }\n    return undefined;\n  }\n  getOrCreateValidator(schema) {\n    const key = Validator.getKey(schema);\n    let _validator = this.getSchema(key);\n    if (!_validator) {\n      this.addSchema(key, schema);\n      _validator = this.getSchema(key);\n    }\n    return _validator;\n  }\n  static getKey(schema) {\n    return (0, utils_js_1.toHex)((0, blake2b_js_1.blake2b)((0, utils_js_1.utf8ToBytes)(JSON.stringify(schema))));\n  }\n  getObjectValueByPath(obj, pointer, objpath) {\n    try {\n      if (typeof obj !== 'object') throw new Error('Invalid input object');\n      if (typeof pointer !== 'string') throw new Error('Invalid JSON pointer');\n      const parts = pointer.split('/');\n      if (!['', '#'].includes(parts.shift())) {\n        throw new Error('Invalid JSON pointer');\n      }\n      if (parts.length === 0) return obj;\n      let curr = obj;\n      for (const part of parts) {\n        if (typeof part !== 'string') throw new Error('Invalid JSON pointer');\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-argument\n        if (objpath) objpath.push(curr); // does not include target itself, but includes head\n        const prop = this.untilde(part);\n        if (typeof curr !== 'object') return undefined;\n        if (!Object.prototype.hasOwnProperty.call(curr, prop)) return undefined;\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\n        curr = curr[prop];\n      }\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n      return curr;\n    } catch (e) {\n      return '';\n    }\n  }\n  // eslint-disable-next-line class-methods-use-this\n  untilde(string) {\n    if (!string.includes('~')) return string;\n    return string.replace(/~[01]/g, match => {\n      switch (match) {\n        case '~1':\n          return '/';\n        case '~0':\n          return '~';\n        default:\n          throw new Error('Unreachable');\n      }\n    });\n  }\n}\nexports.Validator = Validator;","map":{"version":3,"names":["utils_js_1","require","blake2b_js_1","is_my_json_valid_1","__importDefault","formats_js_1","errors_js_1","Validator","constructor","_schemas","Map","factory","validatorInstance","getSchema","key","get","addSchema","schema","set","createValidator","default","formats","greedy","verbose","additionalProperties","validate","data","options","localValidate","getOrCreateValidator","errors","convertErrors","silent","Web3ValidatorError","undefined","Array","isArray","length","map","error","message","keyword","params","schemaPath","slice","join","field","_instancePath","replace","instancePath","schemaData","getObjectValueByPath","minItems","limit","maxItems","startsWith","endsWith","formatName","split","dataValue","value","getKey","_validator","toHex","blake2b","utf8ToBytes","JSON","stringify","obj","pointer","objpath","Error","parts","includes","shift","curr","part","push","prop","untilde","Object","prototype","hasOwnProperty","call","e","string","match","exports"],"sources":["/Users/branko/Documents/Web3_FE_task/node_modules/web3-validator/src/validator.ts"],"sourcesContent":["/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\nimport { Web3ValidationErrorObject } from 'web3-types';\n\nimport { toHex, utf8ToBytes } from 'ethereum-cryptography/utils.js';\nimport { blake2b } from 'ethereum-cryptography/blake2b.js';\nimport validator from 'is-my-json-valid';\nimport formats from './formats.js';\nimport { Web3ValidatorError } from './errors.js';\nimport { Validate, Json, Schema, RawValidationError } from './types.js';\n\nexport class Validator {\n\t// eslint-disable-next-line no-use-before-define\n\tprivate static validatorInstance?: Validator;\n\t// eslint-disable-next-line no-useless-constructor, @typescript-eslint/no-empty-function\n\tprivate constructor() {}\n\tpublic static factory(): Validator {\n\t\tif (!Validator.validatorInstance) {\n\t\t\tValidator.validatorInstance = new Validator();\n\t\t}\n\t\treturn Validator.validatorInstance;\n\t}\n\tprivate readonly _schemas: Map<string, Validate> = new Map();\n\tpublic getSchema(key: string) {\n\t\treturn this._schemas.get(key);\n\t}\n\n\tpublic addSchema(key: string, schema: Schema) {\n\t\tthis._schemas.set(key, this.createValidator(schema));\n\t}\n\n\t// eslint-disable-next-line  class-methods-use-this\n\tprivate createValidator(schema: Schema): Validate {\n\t\t// eslint-disable-next-line  @typescript-eslint/no-unsafe-call\n\t\t// @ts-expect-error validator params correction\n\t\treturn validator(schema, {\n\t\t\tformats,\n\t\t\tgreedy: true,\n\t\t\tverbose: true,\n\t\t\tadditionalProperties: false,\n\t\t}) as Validate;\n\t}\n\n\tpublic validate(schema: Schema, data: Json, options?: { silent?: boolean }) {\n\t\tconst localValidate = this.getOrCreateValidator(schema);\n\t\tif (!localValidate(data)) {\n\t\t\tconst errors = this.convertErrors(\n\t\t\t\tlocalValidate.errors as RawValidationError[],\n\t\t\t\tschema,\n\t\t\t\tdata,\n\t\t\t);\n\t\t\tif (errors) {\n\t\t\t\tif (options?.silent) {\n\t\t\t\t\treturn errors;\n\t\t\t\t}\n\t\t\t\tthrow new Web3ValidatorError(errors);\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\tprivate convertErrors(\n\t\terrors: RawValidationError[] | undefined,\n\t\tschema: Schema,\n\t\tdata: Json,\n\t): Web3ValidationErrorObject[] | undefined {\n\t\tif (errors && Array.isArray(errors) && errors.length > 0) {\n\t\t\treturn errors.map((error: RawValidationError) => {\n\t\t\t\tlet message;\n\t\t\t\tlet keyword;\n\t\t\t\tlet params;\n\t\t\t\tlet schemaPath;\n\n\t\t\t\tschemaPath = Array.isArray(error.schemaPath)\n\t\t\t\t\t? error.schemaPath.slice(1).join('/')\n\t\t\t\t\t: '';\n\n\t\t\t\tconst { field } = error;\n\t\t\t\tconst _instancePath =\n\t\t\t\t\tschemaPath ||\n\t\t\t\t\t// eslint-disable-next-line no-useless-escape\n\t\t\t\t\t(field?.length >= 4 ? `${field.slice(4).replace(/\\\"|\\[|\\]/g, '')}` : '/');\n\n\t\t\t\tconst instancePath = _instancePath ? `/${_instancePath}` : '';\n\t\t\t\tif (error?.message === 'has less items than allowed') {\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\t\t\t\t\tconst schemaData = this.getObjectValueByPath(schema, schemaPath);\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\t\t\t\tif (schemaData.minItems) {\n\t\t\t\t\t\tkeyword = 'minItems';\n\t\t\t\t\t\tschemaPath = `${schemaPath}/minItems`;\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\n\t\t\t\t\t\tparams = { limit: schemaData.minItems };\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/restrict-template-expressions\n\t\t\t\t\t\tmessage = `must NOT have fewer than ${schemaData.minItems} items`;\n\t\t\t\t\t}\n\t\t\t\t} else if (error?.message === 'has more items than allowed') {\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\t\t\t\t\tconst schemaData = this.getObjectValueByPath(schema, schemaPath);\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\t\t\t\tif (schemaData.maxItems) {\n\t\t\t\t\t\tkeyword = 'maxItems';\n\t\t\t\t\t\tschemaPath = `${schemaPath}/maxItems`;\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\n\t\t\t\t\t\tparams = { limit: schemaData.maxItems };\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/restrict-template-expressions\n\t\t\t\t\t\tmessage = `must NOT have more than ${schemaData.maxItems} items`;\n\t\t\t\t\t}\n\t\t\t\t} else if (\n\t\t\t\t\terror?.message.startsWith('must be') &&\n\t\t\t\t\terror?.message.endsWith('format')\n\t\t\t\t) {\n\t\t\t\t\tconst formatName = error?.message.split(' ')[2];\n\t\t\t\t\tif (formatName) {\n\t\t\t\t\t\tmessage = `must pass \"${formatName}\" validation`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// eslint-disable-next-line  @typescript-eslint/no-unsafe-assignment\n\t\t\t\tconst dataValue = this.getObjectValueByPath(data as object, instancePath);\n\t\t\t\treturn {\n\t\t\t\t\tkeyword: keyword ?? error.field,\n\t\t\t\t\tinstancePath,\n\t\t\t\t\tschemaPath: `#${schemaPath}`,\n\t\t\t\t\t// eslint-disable-next-line  @typescript-eslint/no-unsafe-assignment\n\t\t\t\t\tparams: params ?? { value: dataValue },\n\t\t\t\t\tmessage: message ?? error.message,\n\t\t\t\t} as Web3ValidationErrorObject;\n\t\t\t});\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tpublic getOrCreateValidator(schema: Schema): Validate {\n\t\tconst key = Validator.getKey(schema);\n\t\tlet _validator = this.getSchema(key);\n\t\tif (!_validator) {\n\t\t\tthis.addSchema(key, schema);\n\t\t\t_validator = this.getSchema(key);\n\t\t}\n\t\treturn _validator!;\n\t}\n\n\tpublic static getKey(schema: Schema) {\n\t\treturn toHex(blake2b(utf8ToBytes(JSON.stringify(schema))));\n\t}\n\tprivate getObjectValueByPath(obj: object, pointer: string, objpath?: object[]) {\n\t\ttry {\n\t\t\tif (typeof obj !== 'object') throw new Error('Invalid input object');\n\t\t\tif (typeof pointer !== 'string') throw new Error('Invalid JSON pointer');\n\t\t\tconst parts = pointer.split('/');\n\t\t\tif (!['', '#'].includes(parts.shift() as string)) {\n\t\t\t\tthrow new Error('Invalid JSON pointer');\n\t\t\t}\n\t\t\tif (parts.length === 0) return obj;\n\n\t\t\tlet curr: any = obj;\n\t\t\tfor (const part of parts) {\n\t\t\t\tif (typeof part !== 'string') throw new Error('Invalid JSON pointer');\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-argument\n\t\t\t\tif (objpath) objpath.push(curr); // does not include target itself, but includes head\n\t\t\t\tconst prop = this.untilde(part);\n\t\t\t\tif (typeof curr !== 'object') return undefined;\n\t\t\t\tif (!Object.prototype.hasOwnProperty.call(curr, prop)) return undefined;\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\n\t\t\t\tcurr = curr[prop];\n\t\t\t}\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\t\t\treturn curr;\n\t\t} catch (e) {\n\t\t\treturn '';\n\t\t}\n\t}\n\t// eslint-disable-next-line class-methods-use-this\n\tprivate untilde(string: string) {\n\t\tif (!string.includes('~')) return string;\n\t\treturn string.replace(/~[01]/g, match => {\n\t\t\tswitch (match) {\n\t\t\t\tcase '~1':\n\t\t\t\t\treturn '/';\n\t\t\t\tcase '~0':\n\t\t\t\t\treturn '~';\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error('Unreachable');\n\t\t\t}\n\t\t});\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}