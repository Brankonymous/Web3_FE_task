{"ast":null,"code":"var genobj = require('generate-object-property');\nvar genfun = require('generate-function');\nvar jsonpointer = require('jsonpointer');\nvar xtend = require('xtend');\nvar formats = require('./formats');\nvar get = function (obj, additionalSchemas, ptr) {\n  var visit = function (sub) {\n    if (sub && sub.id === ptr) return sub;\n    if (typeof sub !== 'object' || !sub) return null;\n    return Object.keys(sub).reduce(function (res, k) {\n      return res || visit(sub[k]);\n    }, null);\n  };\n  var res = visit(obj);\n  if (res) return res;\n  ptr = ptr.replace(/^#/, '');\n  ptr = ptr.replace(/\\/$/, '');\n  try {\n    return jsonpointer.get(obj, decodeURI(ptr));\n  } catch (err) {\n    var end = ptr.indexOf('#');\n    var other;\n    // external reference\n    if (end !== 0) {\n      // fragment doesn't exist.\n      if (end === -1) {\n        other = additionalSchemas[ptr];\n      } else {\n        var ext = ptr.slice(0, end);\n        other = additionalSchemas[ext];\n        var fragment = ptr.slice(end).replace(/^#/, '');\n        try {\n          return jsonpointer.get(other, fragment);\n        } catch (err) {}\n      }\n    } else {\n      other = additionalSchemas[ptr];\n    }\n    return other || null;\n  }\n};\nvar types = {};\ntypes.any = function () {\n  return 'true';\n};\ntypes.null = function (name) {\n  return name + ' === null';\n};\ntypes.boolean = function (name) {\n  return 'typeof ' + name + ' === \"boolean\"';\n};\ntypes.array = function (name) {\n  return 'Array.isArray(' + name + ')';\n};\ntypes.object = function (name) {\n  return 'typeof ' + name + ' === \"object\" && ' + name + ' && !Array.isArray(' + name + ')';\n};\ntypes.number = function (name) {\n  return 'typeof ' + name + ' === \"number\" && isFinite(' + name + ')';\n};\ntypes.integer = function (name) {\n  return 'typeof ' + name + ' === \"number\" && (Math.floor(' + name + ') === ' + name + ' || ' + name + ' > 9007199254740992 || ' + name + ' < -9007199254740992)';\n};\ntypes.string = function (name) {\n  return 'typeof ' + name + ' === \"string\"';\n};\nvar unique = function (array, len) {\n  len = Math.min(len === -1 ? array.length : len, array.length);\n  var list = [];\n  for (var i = 0; i < len; i++) {\n    list.push(typeof array[i] === 'object' ? JSON.stringify(array[i]) : array[i]);\n  }\n  for (var i = 1; i < list.length; i++) {\n    if (list.indexOf(list[i]) !== i) return false;\n  }\n  return true;\n};\nvar isMultipleOf = function (name, multipleOf) {\n  var res;\n  var factor = (multipleOf | 0) !== multipleOf ? Math.pow(10, multipleOf.toString().split('.').pop().length) : 1;\n  if (factor > 1) {\n    var factorName = (name | 0) !== name ? Math.pow(10, name.toString().split('.').pop().length) : 1;\n    if (factorName > factor) res = true;else res = Math.round(factor * name) % (factor * multipleOf);\n  } else res = name % multipleOf;\n  return !res;\n};\nvar testLimitedRegex = function (r, s, maxLength) {\n  if (maxLength > -1 && s.length > maxLength) return true;\n  return r.test(s);\n};\nvar compile = function (schema, cache, root, reporter, opts) {\n  var fmts = opts ? xtend(formats, opts.formats) : formats;\n  var scope = {\n    unique: unique,\n    formats: fmts,\n    isMultipleOf: isMultipleOf,\n    testLimitedRegex: testLimitedRegex\n  };\n  var verbose = opts ? !!opts.verbose : false;\n  var greedy = opts && opts.greedy !== undefined ? opts.greedy : false;\n  var syms = {};\n  var allocated = [];\n  var gensym = function (name) {\n    var res = name + (syms[name] = (syms[name] || 0) + 1);\n    allocated.push(res);\n    return res;\n  };\n  var formatName = function (field) {\n    var s = JSON.stringify(field);\n    try {\n      var pattern = /\\[([^\\[\\]\"]+)\\]/;\n      while (pattern.test(s)) s = s.replace(pattern, replacer);\n      return s;\n    } catch (_) {\n      return JSON.stringify(field);\n    }\n    function replacer(match, v) {\n      if (allocated.indexOf(v) === -1) throw new Error('Unreplaceable');\n      return '.\" + ' + v + ' + \"';\n    }\n  };\n  var reversePatterns = {};\n  var patterns = function (p) {\n    if (reversePatterns[p]) return reversePatterns[p];\n    var n = gensym('pattern');\n    scope[n] = new RegExp(p);\n    reversePatterns[p] = n;\n    return n;\n  };\n  var vars = ['i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'x', 'y', 'z'];\n  var genloop = function () {\n    var v = vars.shift();\n    vars.push(v + v[0]);\n    allocated.push(v);\n    return v;\n  };\n  var visit = function (name, node, reporter, filter, schemaPath) {\n    var properties = node.properties;\n    var type = node.type;\n    var tuple = false;\n    if (Array.isArray(node.items)) {\n      // tuple type\n      properties = {};\n      node.items.forEach(function (item, i) {\n        properties[i] = item;\n      });\n      type = 'array';\n      tuple = true;\n    }\n    var indent = 0;\n    var error = function (msg, prop, value) {\n      validate('errors++');\n      if (reporter === true) {\n        validate('if (validate.errors === null) validate.errors = []');\n        if (verbose) {\n          validate('validate.errors.push({field:%s,message:%s,value:%s,type:%s,schemaPath:%s})', formatName(prop || name), JSON.stringify(msg), value || name, JSON.stringify(type), JSON.stringify(schemaPath));\n        } else {\n          validate('validate.errors.push({field:%s,message:%s})', formatName(prop || name), JSON.stringify(msg));\n        }\n      }\n    };\n    if (node.required === true) {\n      indent++;\n      validate('if (%s === undefined) {', name);\n      error('is required');\n      validate('} else {');\n    } else {\n      indent++;\n      validate('if (%s !== undefined) {', name);\n    }\n    var valid = [].concat(type).map(function (t) {\n      if (t && !types.hasOwnProperty(t)) {\n        throw new Error('Unknown type: ' + t);\n      }\n      return types[t || 'any'](name);\n    }).join(' || ') || 'true';\n    if (valid !== 'true') {\n      indent++;\n      validate('if (!(%s)) {', valid);\n      error('is the wrong type');\n      validate('} else {');\n    }\n    if (tuple) {\n      if (node.additionalItems === false) {\n        validate('if (%s.length > %d) {', name, node.items.length);\n        error('has additional items');\n        validate('}');\n      } else if (node.additionalItems) {\n        var i = genloop();\n        validate('for (var %s = %d; %s < %s.length; %s++) {', i, node.items.length, i, name, i);\n        visit(name + '[' + i + ']', node.additionalItems, reporter, filter, schemaPath.concat('additionalItems'));\n        validate('}');\n      }\n    }\n    if (node.format && fmts[node.format]) {\n      if (type !== 'string' && formats[node.format]) validate('if (%s) {', types.string(name));\n      var n = gensym('format');\n      scope[n] = fmts[node.format];\n      if (typeof scope[n] === 'function') validate('if (!%s(%s)) {', n, name);else validate('if (!testLimitedRegex(%s, %s, %d)) {', n, name, typeof node.maxLength === 'undefined' ? -1 : node.maxLength);\n      error('must be ' + node.format + ' format');\n      validate('}');\n      if (type !== 'string' && formats[node.format]) validate('}');\n    }\n    if (Array.isArray(node.required)) {\n      var n = gensym('missing');\n      validate('var %s = 0', n);\n      var checkRequired = function (req) {\n        var prop = genobj(name, req);\n        validate('if (%s === undefined) {', prop);\n        error('is required', prop);\n        validate('%s++', n);\n        validate('}');\n      };\n      validate('if ((%s)) {', type !== 'object' ? types.object(name) : 'true');\n      node.required.map(checkRequired);\n      validate('}');\n      if (!greedy) {\n        validate('if (%s === 0) {', n);\n        indent++;\n      }\n    }\n    if (node.uniqueItems) {\n      if (type !== 'array') validate('if (%s) {', types.array(name));\n      validate('if (!(unique(%s, %d))) {', name, node.maxItems || -1);\n      error('must be unique');\n      validate('}');\n      if (type !== 'array') validate('}');\n    }\n    if (node.enum) {\n      var complex = node.enum.some(function (e) {\n        return typeof e === 'object';\n      });\n      var compare = complex ? function (e) {\n        return 'JSON.stringify(' + name + ')' + ' !== JSON.stringify(' + JSON.stringify(e) + ')';\n      } : function (e) {\n        return name + ' !== ' + JSON.stringify(e);\n      };\n      validate('if (%s) {', node.enum.map(compare).join(' && ') || 'false');\n      error('must be an enum value');\n      validate('}');\n    }\n    if (node.dependencies) {\n      if (type !== 'object') validate('if (%s) {', types.object(name));\n      Object.keys(node.dependencies).forEach(function (key) {\n        var deps = node.dependencies[key];\n        if (typeof deps === 'string') deps = [deps];\n        var exists = function (k) {\n          return genobj(name, k) + ' !== undefined';\n        };\n        if (Array.isArray(deps)) {\n          validate('if (%s !== undefined && !(%s)) {', genobj(name, key), deps.map(exists).join(' && ') || 'true');\n          error('dependencies not set');\n          validate('}');\n        }\n        if (typeof deps === 'object') {\n          validate('if (%s !== undefined) {', genobj(name, key));\n          visit(name, deps, reporter, filter, schemaPath.concat(['dependencies', key]));\n          validate('}');\n        }\n      });\n      if (type !== 'object') validate('}');\n    }\n    if (node.additionalProperties || node.additionalProperties === false) {\n      if (type !== 'object') validate('if (%s) {', types.object(name));\n      var i = genloop();\n      var keys = gensym('keys');\n      var toCompare = function (p) {\n        return keys + '[' + i + '] !== ' + JSON.stringify(p);\n      };\n      var toTest = function (p) {\n        return '!' + patterns(p) + '.test(' + keys + '[' + i + '])';\n      };\n      var additionalProp = Object.keys(properties || {}).map(toCompare).concat(Object.keys(node.patternProperties || {}).map(toTest)).join(' && ') || 'true';\n      validate('var %s = Object.keys(%s)', keys, name)('for (var %s = 0; %s < %s.length; %s++) {', i, i, keys, i)('if (%s) {', additionalProp);\n      if (node.additionalProperties === false) {\n        if (filter) validate('delete %s', name + '[' + keys + '[' + i + ']]');\n        error('has additional properties', null, JSON.stringify(name + '.') + ' + ' + keys + '[' + i + ']');\n      } else {\n        visit(name + '[' + keys + '[' + i + ']]', node.additionalProperties, reporter, filter, schemaPath.concat(['additionalProperties']));\n      }\n      validate('}')('}');\n      if (type !== 'object') validate('}');\n    }\n    if (node.$ref) {\n      var sub = get(root, opts && opts.schemas || {}, node.$ref);\n      if (sub) {\n        var fn = cache[node.$ref];\n        if (!fn) {\n          cache[node.$ref] = function proxy(data) {\n            return fn(data);\n          };\n          fn = compile(sub, cache, root, false, opts);\n        }\n        var n = gensym('ref');\n        scope[n] = fn;\n        validate('if (!(%s(%s))) {', n, name);\n        error('referenced schema does not match');\n        validate('}');\n      }\n    }\n    if (node.not) {\n      var prev = gensym('prev');\n      validate('var %s = errors', prev);\n      visit(name, node.not, false, filter, schemaPath.concat('not'));\n      validate('if (%s === errors) {', prev);\n      error('negative schema matches');\n      validate('} else {')('errors = %s', prev)('}');\n    }\n    if (node.items && !tuple) {\n      if (type !== 'array') validate('if (%s) {', types.array(name));\n      var i = genloop();\n      validate('for (var %s = 0; %s < %s.length; %s++) {', i, i, name, i);\n      visit(name + '[' + i + ']', node.items, reporter, filter, schemaPath.concat('items'));\n      validate('}');\n      if (type !== 'array') validate('}');\n    }\n    if (node.patternProperties) {\n      if (type !== 'object') validate('if (%s) {', types.object(name));\n      var keys = gensym('keys');\n      var i = genloop();\n      validate('var %s = Object.keys(%s)', keys, name)('for (var %s = 0; %s < %s.length; %s++) {', i, i, keys, i);\n      Object.keys(node.patternProperties).forEach(function (key) {\n        var p = patterns(key);\n        validate('if (%s.test(%s)) {', p, keys + '[' + i + ']');\n        visit(name + '[' + keys + '[' + i + ']]', node.patternProperties[key], reporter, filter, schemaPath.concat(['patternProperties', key]));\n        validate('}');\n      });\n      validate('}');\n      if (type !== 'object') validate('}');\n    }\n    if (node.pattern) {\n      var p = patterns(node.pattern);\n      if (type !== 'string') validate('if (%s) {', types.string(name));\n      validate('if (!(testLimitedRegex(%s, %s, %d))) {', p, name, typeof node.maxLength === 'undefined' ? -1 : node.maxLength);\n      error('pattern mismatch');\n      validate('}');\n      if (type !== 'string') validate('}');\n    }\n    if (node.allOf) {\n      node.allOf.forEach(function (sch, key) {\n        visit(name, sch, reporter, filter, schemaPath.concat(['allOf', key]));\n      });\n    }\n    if (node.anyOf && node.anyOf.length) {\n      var prev = gensym('prev');\n      node.anyOf.forEach(function (sch, i) {\n        if (i === 0) {\n          validate('var %s = errors', prev);\n        } else {\n          validate('if (errors !== %s) {', prev)('errors = %s', prev);\n        }\n        visit(name, sch, false, false, schemaPath);\n      });\n      node.anyOf.forEach(function (sch, i) {\n        if (i) validate('}');\n      });\n      validate('if (%s !== errors) {', prev);\n      error('no schemas match');\n      validate('}');\n    }\n    if (node.oneOf && node.oneOf.length) {\n      var prev = gensym('prev');\n      var passes = gensym('passes');\n      validate('var %s = errors', prev)('var %s = 0', passes);\n      node.oneOf.forEach(function (sch, i) {\n        visit(name, sch, false, false, schemaPath);\n        validate('if (%s === errors) {', prev)('%s++', passes)('} else {')('errors = %s', prev)('}');\n      });\n      validate('if (%s !== 1) {', passes);\n      error('no (or more than one) schemas match');\n      validate('}');\n    }\n    if (node.multipleOf !== undefined) {\n      if (type !== 'number' && type !== 'integer') validate('if (%s) {', types.number(name));\n      validate('if (!isMultipleOf(%s, %d)) {', name, node.multipleOf);\n      error('has a remainder');\n      validate('}');\n      if (type !== 'number' && type !== 'integer') validate('}');\n    }\n    if (node.maxProperties !== undefined) {\n      if (type !== 'object') validate('if (%s) {', types.object(name));\n      validate('if (Object.keys(%s).length > %d) {', name, node.maxProperties);\n      error('has more properties than allowed');\n      validate('}');\n      if (type !== 'object') validate('}');\n    }\n    if (node.minProperties !== undefined) {\n      if (type !== 'object') validate('if (%s) {', types.object(name));\n      validate('if (Object.keys(%s).length < %d) {', name, node.minProperties);\n      error('has less properties than allowed');\n      validate('}');\n      if (type !== 'object') validate('}');\n    }\n    if (node.maxItems !== undefined) {\n      if (type !== 'array') validate('if (%s) {', types.array(name));\n      validate('if (%s.length > %d) {', name, node.maxItems);\n      error('has more items than allowed');\n      validate('}');\n      if (type !== 'array') validate('}');\n    }\n    if (node.minItems !== undefined) {\n      if (type !== 'array') validate('if (%s) {', types.array(name));\n      validate('if (%s.length < %d) {', name, node.minItems);\n      error('has less items than allowed');\n      validate('}');\n      if (type !== 'array') validate('}');\n    }\n    if (node.maxLength !== undefined) {\n      if (type !== 'string') validate('if (%s) {', types.string(name));\n      validate('if (%s.length > %d) {', name, node.maxLength);\n      error('has longer length than allowed');\n      validate('}');\n      if (type !== 'string') validate('}');\n    }\n    if (node.minLength !== undefined) {\n      if (type !== 'string') validate('if (%s) {', types.string(name));\n      validate('if (%s.length < %d) {', name, node.minLength);\n      error('has less length than allowed');\n      validate('}');\n      if (type !== 'string') validate('}');\n    }\n    if (node.minimum !== undefined) {\n      if (type !== 'number' && type !== 'integer') validate('if (%s) {', types.number(name));\n      validate('if (%s %s %d) {', name, node.exclusiveMinimum ? '<=' : '<', node.minimum);\n      error('is less than minimum');\n      validate('}');\n      if (type !== 'number' && type !== 'integer') validate('}');\n    }\n    if (node.maximum !== undefined) {\n      if (type !== 'number' && type !== 'integer') validate('if (%s) {', types.number(name));\n      validate('if (%s %s %d) {', name, node.exclusiveMaximum ? '>=' : '>', node.maximum);\n      error('is more than maximum');\n      validate('}');\n      if (type !== 'number' && type !== 'integer') validate('}');\n    }\n    if (properties) {\n      Object.keys(properties).forEach(function (p) {\n        if (Array.isArray(type) && type.indexOf('null') !== -1) validate('if (%s !== null) {', name);\n        visit(genobj(name, p), properties[p], reporter, filter, schemaPath.concat(tuple ? p : ['properties', p]));\n        if (Array.isArray(type) && type.indexOf('null') !== -1) validate('}');\n      });\n    }\n    while (indent--) validate('}');\n  };\n  var validate = genfun('function validate(data) {')\n  // Since undefined is not a valid JSON value, we coerce to null and other checks will catch this\n  ('if (data === undefined) data = null')('validate.errors = null')('var errors = 0');\n  visit('data', schema, reporter, opts && opts.filter, []);\n  validate('return errors === 0')('}');\n  validate = validate.toFunction(scope);\n  validate.errors = null;\n  if (Object.defineProperty) {\n    Object.defineProperty(validate, 'error', {\n      get: function () {\n        if (!validate.errors) return '';\n        return validate.errors.map(function (err) {\n          return err.field + ' ' + err.message;\n        }).join('\\n');\n      }\n    });\n  }\n  validate.toJSON = function () {\n    return schema;\n  };\n  return validate;\n};\nmodule.exports = function (schema, opts) {\n  if (typeof schema === 'string') schema = JSON.parse(schema);\n  return compile(schema, {}, schema, true, opts);\n};\nmodule.exports.filter = function (schema, opts) {\n  var validate = module.exports(schema, xtend(opts, {\n    filter: true\n  }));\n  return function (sch) {\n    validate(sch);\n    return sch;\n  };\n};","map":{"version":3,"names":["genobj","require","genfun","jsonpointer","xtend","formats","get","obj","additionalSchemas","ptr","visit","sub","id","Object","keys","reduce","res","k","replace","decodeURI","err","end","indexOf","other","ext","slice","fragment","types","any","null","name","boolean","array","object","number","integer","string","unique","len","Math","min","length","list","i","push","JSON","stringify","isMultipleOf","multipleOf","factor","pow","toString","split","pop","factorName","round","testLimitedRegex","r","s","maxLength","test","compile","schema","cache","root","reporter","opts","fmts","scope","verbose","greedy","undefined","syms","allocated","gensym","formatName","field","pattern","replacer","_","match","v","Error","reversePatterns","patterns","p","n","RegExp","vars","genloop","shift","node","filter","schemaPath","properties","type","tuple","Array","isArray","items","forEach","item","indent","error","msg","prop","value","validate","required","valid","concat","map","t","hasOwnProperty","join","additionalItems","format","checkRequired","req","uniqueItems","maxItems","enum","complex","some","e","compare","dependencies","key","deps","exists","additionalProperties","toCompare","toTest","additionalProp","patternProperties","$ref","schemas","fn","proxy","data","not","prev","allOf","sch","anyOf","oneOf","passes","maxProperties","minProperties","minItems","minLength","minimum","exclusiveMinimum","maximum","exclusiveMaximum","toFunction","errors","defineProperty","message","toJSON","module","exports","parse"],"sources":["/Users/branko/Documents/Web3_FE_task/node_modules/is-my-json-valid/index.js"],"sourcesContent":["var genobj = require('generate-object-property')\nvar genfun = require('generate-function')\nvar jsonpointer = require('jsonpointer')\nvar xtend = require('xtend')\nvar formats = require('./formats')\n\nvar get = function(obj, additionalSchemas, ptr) {\n\n  var visit = function(sub) {\n    if (sub && sub.id === ptr) return sub\n    if (typeof sub !== 'object' || !sub) return null\n    return Object.keys(sub).reduce(function(res, k) {\n      return res || visit(sub[k])\n    }, null)\n  }\n\n  var res = visit(obj)\n  if (res) return res\n\n  ptr = ptr.replace(/^#/, '')\n  ptr = ptr.replace(/\\/$/, '')\n\n  try {\n    return jsonpointer.get(obj, decodeURI(ptr))\n  } catch (err) {\n    var end = ptr.indexOf('#')\n    var other\n    // external reference\n    if (end !== 0) {\n      // fragment doesn't exist.\n      if (end === -1) {\n        other = additionalSchemas[ptr]\n      } else {\n        var ext = ptr.slice(0, end)\n        other = additionalSchemas[ext]\n        var fragment = ptr.slice(end).replace(/^#/, '')\n        try {\n          return jsonpointer.get(other, fragment)\n        } catch (err) {}\n      }\n    } else {\n      other = additionalSchemas[ptr]\n    }\n    return other || null\n  }\n}\n\nvar types = {}\n\ntypes.any = function() {\n  return 'true'\n}\n\ntypes.null = function(name) {\n  return name+' === null'\n}\n\ntypes.boolean = function(name) {\n  return 'typeof '+name+' === \"boolean\"'\n}\n\ntypes.array = function(name) {\n  return 'Array.isArray('+name+')'\n}\n\ntypes.object = function(name) {\n  return 'typeof '+name+' === \"object\" && '+name+' && !Array.isArray('+name+')'\n}\n\ntypes.number = function(name) {\n  return 'typeof '+name+' === \"number\" && isFinite('+name+')'\n}\n\ntypes.integer = function(name) {\n  return 'typeof '+name+' === \"number\" && (Math.floor('+name+') === '+name+' || '+name+' > 9007199254740992 || '+name+' < -9007199254740992)'\n}\n\ntypes.string = function(name) {\n  return 'typeof '+name+' === \"string\"'\n}\n\nvar unique = function(array, len) {\n  len = Math.min(len === -1 ? array.length : len, array.length)\n  var list = []\n  for (var i = 0; i < len; i++) {\n    list.push(typeof array[i] === 'object' ? JSON.stringify(array[i]) : array[i])\n  }\n  for (var i = 1; i < list.length; i++) {\n    if (list.indexOf(list[i]) !== i) return false\n  }\n  return true\n}\n\nvar isMultipleOf = function(name, multipleOf) {\n  var res;\n  var factor = ((multipleOf | 0) !== multipleOf) ? Math.pow(10, multipleOf.toString().split('.').pop().length) : 1\n  if (factor > 1) {\n    var factorName = ((name | 0) !== name) ? Math.pow(10, name.toString().split('.').pop().length) : 1\n    if (factorName > factor) res = true\n    else res = Math.round(factor * name) % (factor * multipleOf)\n  }\n  else res = name % multipleOf;\n  return !res;\n}\n\nvar testLimitedRegex = function (r, s, maxLength) {\n  if (maxLength > -1 && s.length > maxLength) return true\n  return r.test(s)\n}\n\nvar compile = function(schema, cache, root, reporter, opts) {\n  var fmts = opts ? xtend(formats, opts.formats) : formats\n  var scope = {unique:unique, formats:fmts, isMultipleOf:isMultipleOf, testLimitedRegex:testLimitedRegex}\n  var verbose = opts ? !!opts.verbose : false;\n  var greedy = opts && opts.greedy !== undefined ?\n    opts.greedy : false;\n\n  var syms = {}\n  var allocated = []\n  var gensym = function(name) {\n    var res = name+(syms[name] = (syms[name] || 0)+1)\n    allocated.push(res)\n    return res\n  }\n\n  var formatName = function(field) {\n    var s = JSON.stringify(field)\n    try {\n      var pattern = /\\[([^\\[\\]\"]+)\\]/\n      while (pattern.test(s)) s = s.replace(pattern, replacer)\n      return s\n    } catch (_) {\n      return JSON.stringify(field)\n    }\n\n    function replacer (match, v) {\n      if (allocated.indexOf(v) === -1) throw new Error('Unreplaceable')\n      return '.\" + ' + v + ' + \"'\n    }\n  }\n\n  var reversePatterns = {}\n  var patterns = function(p) {\n    if (reversePatterns[p]) return reversePatterns[p]\n    var n = gensym('pattern')\n    scope[n] = new RegExp(p)\n    reversePatterns[p] = n\n    return n\n  }\n\n  var vars = ['i','j','k','l','m','n','o','p','q','r','s','t','u','v','x','y','z']\n  var genloop = function() {\n    var v = vars.shift()\n    vars.push(v+v[0])\n    allocated.push(v)\n    return v\n  }\n\n  var visit = function(name, node, reporter, filter, schemaPath) {\n    var properties = node.properties\n    var type = node.type\n    var tuple = false\n\n    if (Array.isArray(node.items)) { // tuple type\n      properties = {}\n      node.items.forEach(function(item, i) {\n        properties[i] = item\n      })\n      type = 'array'\n      tuple = true\n    }\n\n    var indent = 0\n    var error = function(msg, prop, value) {\n      validate('errors++')\n      if (reporter === true) {\n        validate('if (validate.errors === null) validate.errors = []')\n        if (verbose) {\n          validate(\n            'validate.errors.push({field:%s,message:%s,value:%s,type:%s,schemaPath:%s})',\n            formatName(prop || name),\n            JSON.stringify(msg),\n            value || name,\n            JSON.stringify(type),\n            JSON.stringify(schemaPath)\n          )\n        } else {\n          validate('validate.errors.push({field:%s,message:%s})', formatName(prop || name), JSON.stringify(msg))\n        }\n      }\n    }\n\n    if (node.required === true) {\n      indent++\n      validate('if (%s === undefined) {', name)\n      error('is required')\n      validate('} else {')\n    } else {\n      indent++\n      validate('if (%s !== undefined) {', name)\n    }\n\n    var valid = [].concat(type)\n      .map(function(t) {\n        if (t && !types.hasOwnProperty(t)) {\n          throw new Error('Unknown type: ' + t)\n        }\n\n        return types[t || 'any'](name)\n      })\n      .join(' || ') || 'true'\n\n    if (valid !== 'true') {\n      indent++\n      validate('if (!(%s)) {', valid)\n      error('is the wrong type')\n      validate('} else {')\n    }\n\n    if (tuple) {\n      if (node.additionalItems === false) {\n        validate('if (%s.length > %d) {', name, node.items.length)\n        error('has additional items')\n        validate('}')\n      } else if (node.additionalItems) {\n        var i = genloop()\n        validate('for (var %s = %d; %s < %s.length; %s++) {', i, node.items.length, i, name, i)\n        visit(name+'['+i+']', node.additionalItems, reporter, filter, schemaPath.concat('additionalItems'))\n        validate('}')\n      }\n    }\n\n    if (node.format && fmts[node.format]) {\n      if (type !== 'string' && formats[node.format]) validate('if (%s) {', types.string(name))\n      var n = gensym('format')\n      scope[n] = fmts[node.format]\n\n      if (typeof scope[n] === 'function') validate('if (!%s(%s)) {', n, name)\n      else validate('if (!testLimitedRegex(%s, %s, %d)) {', n, name, typeof node.maxLength === 'undefined' ? -1 : node.maxLength)\n      error('must be '+node.format+' format')\n      validate('}')\n      if (type !== 'string' && formats[node.format]) validate('}')\n    }\n\n    if (Array.isArray(node.required)) {\n      var n = gensym('missing')\n      validate('var %s = 0', n)\n      var checkRequired = function (req) {\n        var prop = genobj(name, req);\n        validate('if (%s === undefined) {', prop)\n        error('is required', prop)\n        validate('%s++', n)\n        validate('}')\n      }\n      validate('if ((%s)) {', type !== 'object' ? types.object(name) : 'true')\n      node.required.map(checkRequired)\n      validate('}');\n      if (!greedy) {\n        validate('if (%s === 0) {', n)\n        indent++\n      }\n    }\n\n    if (node.uniqueItems) {\n      if (type !== 'array') validate('if (%s) {', types.array(name))\n      validate('if (!(unique(%s, %d))) {', name, node.maxItems || -1)\n      error('must be unique')\n      validate('}')\n      if (type !== 'array') validate('}')\n    }\n\n    if (node.enum) {\n      var complex = node.enum.some(function(e) {\n        return typeof e === 'object'\n      })\n\n      var compare = complex ?\n        function(e) {\n          return 'JSON.stringify('+name+')'+' !== JSON.stringify('+JSON.stringify(e)+')'\n        } :\n        function(e) {\n          return name+' !== '+JSON.stringify(e)\n        }\n\n      validate('if (%s) {', node.enum.map(compare).join(' && ') || 'false')\n      error('must be an enum value')\n      validate('}')\n    }\n\n    if (node.dependencies) {\n      if (type !== 'object') validate('if (%s) {', types.object(name))\n\n      Object.keys(node.dependencies).forEach(function(key) {\n        var deps = node.dependencies[key]\n        if (typeof deps === 'string') deps = [deps]\n\n        var exists = function(k) {\n          return genobj(name, k) + ' !== undefined'\n        }\n\n        if (Array.isArray(deps)) {\n          validate('if (%s !== undefined && !(%s)) {', genobj(name, key), deps.map(exists).join(' && ') || 'true')\n          error('dependencies not set')\n          validate('}')\n        }\n        if (typeof deps === 'object') {\n          validate('if (%s !== undefined) {', genobj(name, key))\n          visit(name, deps, reporter, filter, schemaPath.concat(['dependencies', key]))\n          validate('}')\n        }\n      })\n\n      if (type !== 'object') validate('}')\n    }\n\n    if (node.additionalProperties || node.additionalProperties === false) {\n      if (type !== 'object') validate('if (%s) {', types.object(name))\n\n      var i = genloop()\n      var keys = gensym('keys')\n\n      var toCompare = function(p) {\n        return keys+'['+i+'] !== '+JSON.stringify(p)\n      }\n\n      var toTest = function(p) {\n        return '!'+patterns(p)+'.test('+keys+'['+i+'])'\n      }\n\n      var additionalProp = Object.keys(properties || {}).map(toCompare)\n        .concat(Object.keys(node.patternProperties || {}).map(toTest))\n        .join(' && ') || 'true'\n\n      validate('var %s = Object.keys(%s)', keys, name)\n        ('for (var %s = 0; %s < %s.length; %s++) {', i, i, keys, i)\n          ('if (%s) {', additionalProp)\n\n      if (node.additionalProperties === false) {\n        if (filter) validate('delete %s', name+'['+keys+'['+i+']]')\n        error('has additional properties', null, JSON.stringify(name+'.') + ' + ' + keys + '['+i+']')\n      } else {\n        visit(name+'['+keys+'['+i+']]', node.additionalProperties, reporter, filter, schemaPath.concat(['additionalProperties']))\n      }\n\n      validate\n          ('}')\n        ('}')\n\n      if (type !== 'object') validate('}')\n    }\n\n    if (node.$ref) {\n      var sub = get(root, opts && opts.schemas || {}, node.$ref)\n      if (sub) {\n        var fn = cache[node.$ref]\n        if (!fn) {\n          cache[node.$ref] = function proxy(data) {\n            return fn(data)\n          }\n          fn = compile(sub, cache, root, false, opts)\n        }\n        var n = gensym('ref')\n        scope[n] = fn\n        validate('if (!(%s(%s))) {', n, name)\n        error('referenced schema does not match')\n        validate('}')\n      }\n    }\n\n    if (node.not) {\n      var prev = gensym('prev')\n      validate('var %s = errors', prev)\n      visit(name, node.not, false, filter, schemaPath.concat('not'))\n      validate('if (%s === errors) {', prev)\n      error('negative schema matches')\n      validate('} else {')\n        ('errors = %s', prev)\n      ('}')\n    }\n\n    if (node.items && !tuple) {\n      if (type !== 'array') validate('if (%s) {', types.array(name))\n\n      var i = genloop()\n      validate('for (var %s = 0; %s < %s.length; %s++) {', i, i, name, i)\n      visit(name+'['+i+']', node.items, reporter, filter, schemaPath.concat('items'))\n      validate('}')\n\n      if (type !== 'array') validate('}')\n    }\n\n    if (node.patternProperties) {\n      if (type !== 'object') validate('if (%s) {', types.object(name))\n      var keys = gensym('keys')\n      var i = genloop()\n      validate\n        ('var %s = Object.keys(%s)', keys, name)\n        ('for (var %s = 0; %s < %s.length; %s++) {', i, i, keys, i)\n\n      Object.keys(node.patternProperties).forEach(function(key) {\n        var p = patterns(key)\n        validate('if (%s.test(%s)) {', p, keys+'['+i+']')\n        visit(name+'['+keys+'['+i+']]', node.patternProperties[key], reporter, filter, schemaPath.concat(['patternProperties', key]))\n        validate('}')\n      })\n\n      validate('}')\n      if (type !== 'object') validate('}')\n    }\n\n    if (node.pattern) {\n      var p = patterns(node.pattern)\n      if (type !== 'string') validate('if (%s) {', types.string(name))\n      validate('if (!(testLimitedRegex(%s, %s, %d))) {', p, name, typeof node.maxLength === 'undefined' ? -1 : node.maxLength)\n      error('pattern mismatch')\n      validate('}')\n      if (type !== 'string') validate('}')\n    }\n\n    if (node.allOf) {\n      node.allOf.forEach(function(sch, key) {\n        visit(name, sch, reporter, filter, schemaPath.concat(['allOf', key]))\n      })\n    }\n\n    if (node.anyOf && node.anyOf.length) {\n      var prev = gensym('prev')\n\n      node.anyOf.forEach(function(sch, i) {\n        if (i === 0) {\n          validate('var %s = errors', prev)\n        } else {\n          validate('if (errors !== %s) {', prev)\n            ('errors = %s', prev)\n        }\n        visit(name, sch, false, false, schemaPath)\n      })\n      node.anyOf.forEach(function(sch, i) {\n        if (i) validate('}')\n      })\n      validate('if (%s !== errors) {', prev)\n      error('no schemas match')\n      validate('}')\n    }\n\n    if (node.oneOf && node.oneOf.length) {\n      var prev = gensym('prev')\n      var passes = gensym('passes')\n\n      validate\n        ('var %s = errors', prev)\n        ('var %s = 0', passes)\n\n      node.oneOf.forEach(function(sch, i) {\n        visit(name, sch, false, false, schemaPath)\n        validate('if (%s === errors) {', prev)\n          ('%s++', passes)\n        ('} else {')\n          ('errors = %s', prev)\n        ('}')\n      })\n\n      validate('if (%s !== 1) {', passes)\n      error('no (or more than one) schemas match')\n      validate('}')\n    }\n\n    if (node.multipleOf !== undefined) {\n      if (type !== 'number' && type !== 'integer') validate('if (%s) {', types.number(name))\n\n      validate('if (!isMultipleOf(%s, %d)) {', name, node.multipleOf)\n\n      error('has a remainder')\n      validate('}')\n\n      if (type !== 'number' && type !== 'integer') validate('}')\n    }\n\n    if (node.maxProperties !== undefined) {\n      if (type !== 'object') validate('if (%s) {', types.object(name))\n\n      validate('if (Object.keys(%s).length > %d) {', name, node.maxProperties)\n      error('has more properties than allowed')\n      validate('}')\n\n      if (type !== 'object') validate('}')\n    }\n\n    if (node.minProperties !== undefined) {\n      if (type !== 'object') validate('if (%s) {', types.object(name))\n\n      validate('if (Object.keys(%s).length < %d) {', name, node.minProperties)\n      error('has less properties than allowed')\n      validate('}')\n\n      if (type !== 'object') validate('}')\n    }\n\n    if (node.maxItems !== undefined) {\n      if (type !== 'array') validate('if (%s) {', types.array(name))\n\n      validate('if (%s.length > %d) {', name, node.maxItems)\n      error('has more items than allowed')\n      validate('}')\n\n      if (type !== 'array') validate('}')\n    }\n\n    if (node.minItems !== undefined) {\n      if (type !== 'array') validate('if (%s) {', types.array(name))\n\n      validate('if (%s.length < %d) {', name, node.minItems)\n      error('has less items than allowed')\n      validate('}')\n\n      if (type !== 'array') validate('}')\n    }\n\n    if (node.maxLength !== undefined) {\n      if (type !== 'string') validate('if (%s) {', types.string(name))\n\n      validate('if (%s.length > %d) {', name, node.maxLength)\n      error('has longer length than allowed')\n      validate('}')\n\n      if (type !== 'string') validate('}')\n    }\n\n    if (node.minLength !== undefined) {\n      if (type !== 'string') validate('if (%s) {', types.string(name))\n\n      validate('if (%s.length < %d) {', name, node.minLength)\n      error('has less length than allowed')\n      validate('}')\n\n      if (type !== 'string') validate('}')\n    }\n\n    if (node.minimum !== undefined) {\n      if (type !== 'number' && type !== 'integer') validate('if (%s) {', types.number(name))\n\n      validate('if (%s %s %d) {', name, node.exclusiveMinimum ? '<=' : '<', node.minimum)\n      error('is less than minimum')\n      validate('}')\n\n      if (type !== 'number' && type !== 'integer') validate('}')\n    }\n\n    if (node.maximum !== undefined) {\n      if (type !== 'number' && type !== 'integer') validate('if (%s) {', types.number(name))\n\n      validate('if (%s %s %d) {', name, node.exclusiveMaximum ? '>=' : '>', node.maximum)\n      error('is more than maximum')\n      validate('}')\n\n      if (type !== 'number' && type !== 'integer') validate('}')\n    }\n\n    if (properties) {\n      Object.keys(properties).forEach(function(p) {\n        if (Array.isArray(type) && type.indexOf('null') !== -1) validate('if (%s !== null) {', name)\n\n        visit(\n          genobj(name, p),\n          properties[p],\n          reporter,\n          filter,\n          schemaPath.concat(tuple ? p : ['properties', p])\n        )\n\n        if (Array.isArray(type) && type.indexOf('null') !== -1) validate('}')\n      })\n    }\n\n    while (indent--) validate('}')\n  }\n\n  var validate = genfun\n    ('function validate(data) {')\n      // Since undefined is not a valid JSON value, we coerce to null and other checks will catch this\n      ('if (data === undefined) data = null')\n      ('validate.errors = null')\n      ('var errors = 0')\n\n  visit('data', schema, reporter, opts && opts.filter, [])\n\n  validate\n      ('return errors === 0')\n    ('}')\n\n  validate = validate.toFunction(scope)\n  validate.errors = null\n\n  if (Object.defineProperty) {\n    Object.defineProperty(validate, 'error', {\n      get: function() {\n        if (!validate.errors) return ''\n        return validate.errors.map(function(err) {\n          return err.field + ' ' + err.message;\n        }).join('\\n')\n      }\n    })\n  }\n\n  validate.toJSON = function() {\n    return schema\n  }\n\n  return validate\n}\n\nmodule.exports = function(schema, opts) {\n  if (typeof schema === 'string') schema = JSON.parse(schema)\n  return compile(schema, {}, schema, true, opts)\n}\n\nmodule.exports.filter = function(schema, opts) {\n  var validate = module.exports(schema, xtend(opts, {filter: true}))\n  return function(sch) {\n    validate(sch)\n    return sch\n  }\n}\n"],"mappings":"AAAA,IAAIA,MAAM,GAAGC,OAAO,CAAC,0BAA0B,CAAC;AAChD,IAAIC,MAAM,GAAGD,OAAO,CAAC,mBAAmB,CAAC;AACzC,IAAIE,WAAW,GAAGF,OAAO,CAAC,aAAa,CAAC;AACxC,IAAIG,KAAK,GAAGH,OAAO,CAAC,OAAO,CAAC;AAC5B,IAAII,OAAO,GAAGJ,OAAO,CAAC,WAAW,CAAC;AAElC,IAAIK,GAAG,GAAG,SAAAA,CAASC,GAAG,EAAEC,iBAAiB,EAAEC,GAAG,EAAE;EAE9C,IAAIC,KAAK,GAAG,SAAAA,CAASC,GAAG,EAAE;IACxB,IAAIA,GAAG,IAAIA,GAAG,CAACC,EAAE,KAAKH,GAAG,EAAE,OAAOE,GAAG;IACrC,IAAI,OAAOA,GAAG,KAAK,QAAQ,IAAI,CAACA,GAAG,EAAE,OAAO,IAAI;IAChD,OAAOE,MAAM,CAACC,IAAI,CAACH,GAAG,CAAC,CAACI,MAAM,CAAC,UAASC,GAAG,EAAEC,CAAC,EAAE;MAC9C,OAAOD,GAAG,IAAIN,KAAK,CAACC,GAAG,CAACM,CAAC,CAAC,CAAC;IAC7B,CAAC,EAAE,IAAI,CAAC;EACV,CAAC;EAED,IAAID,GAAG,GAAGN,KAAK,CAACH,GAAG,CAAC;EACpB,IAAIS,GAAG,EAAE,OAAOA,GAAG;EAEnBP,GAAG,GAAGA,GAAG,CAACS,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC;EAC3BT,GAAG,GAAGA,GAAG,CAACS,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;EAE5B,IAAI;IACF,OAAOf,WAAW,CAACG,GAAG,CAACC,GAAG,EAAEY,SAAS,CAACV,GAAG,CAAC,CAAC;EAC7C,CAAC,CAAC,OAAOW,GAAG,EAAE;IACZ,IAAIC,GAAG,GAAGZ,GAAG,CAACa,OAAO,CAAC,GAAG,CAAC;IAC1B,IAAIC,KAAK;IACT;IACA,IAAIF,GAAG,KAAK,CAAC,EAAE;MACb;MACA,IAAIA,GAAG,KAAK,CAAC,CAAC,EAAE;QACdE,KAAK,GAAGf,iBAAiB,CAACC,GAAG,CAAC;MAChC,CAAC,MAAM;QACL,IAAIe,GAAG,GAAGf,GAAG,CAACgB,KAAK,CAAC,CAAC,EAAEJ,GAAG,CAAC;QAC3BE,KAAK,GAAGf,iBAAiB,CAACgB,GAAG,CAAC;QAC9B,IAAIE,QAAQ,GAAGjB,GAAG,CAACgB,KAAK,CAACJ,GAAG,CAAC,CAACH,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC;QAC/C,IAAI;UACF,OAAOf,WAAW,CAACG,GAAG,CAACiB,KAAK,EAAEG,QAAQ,CAAC;QACzC,CAAC,CAAC,OAAON,GAAG,EAAE,CAAC;MACjB;IACF,CAAC,MAAM;MACLG,KAAK,GAAGf,iBAAiB,CAACC,GAAG,CAAC;IAChC;IACA,OAAOc,KAAK,IAAI,IAAI;EACtB;AACF,CAAC;AAED,IAAII,KAAK,GAAG,CAAC,CAAC;AAEdA,KAAK,CAACC,GAAG,GAAG,YAAW;EACrB,OAAO,MAAM;AACf,CAAC;AAEDD,KAAK,CAACE,IAAI,GAAG,UAASC,IAAI,EAAE;EAC1B,OAAOA,IAAI,GAAC,WAAW;AACzB,CAAC;AAEDH,KAAK,CAACI,OAAO,GAAG,UAASD,IAAI,EAAE;EAC7B,OAAO,SAAS,GAACA,IAAI,GAAC,gBAAgB;AACxC,CAAC;AAEDH,KAAK,CAACK,KAAK,GAAG,UAASF,IAAI,EAAE;EAC3B,OAAO,gBAAgB,GAACA,IAAI,GAAC,GAAG;AAClC,CAAC;AAEDH,KAAK,CAACM,MAAM,GAAG,UAASH,IAAI,EAAE;EAC5B,OAAO,SAAS,GAACA,IAAI,GAAC,mBAAmB,GAACA,IAAI,GAAC,qBAAqB,GAACA,IAAI,GAAC,GAAG;AAC/E,CAAC;AAEDH,KAAK,CAACO,MAAM,GAAG,UAASJ,IAAI,EAAE;EAC5B,OAAO,SAAS,GAACA,IAAI,GAAC,4BAA4B,GAACA,IAAI,GAAC,GAAG;AAC7D,CAAC;AAEDH,KAAK,CAACQ,OAAO,GAAG,UAASL,IAAI,EAAE;EAC7B,OAAO,SAAS,GAACA,IAAI,GAAC,+BAA+B,GAACA,IAAI,GAAC,QAAQ,GAACA,IAAI,GAAC,MAAM,GAACA,IAAI,GAAC,yBAAyB,GAACA,IAAI,GAAC,uBAAuB;AAC7I,CAAC;AAEDH,KAAK,CAACS,MAAM,GAAG,UAASN,IAAI,EAAE;EAC5B,OAAO,SAAS,GAACA,IAAI,GAAC,eAAe;AACvC,CAAC;AAED,IAAIO,MAAM,GAAG,SAAAA,CAASL,KAAK,EAAEM,GAAG,EAAE;EAChCA,GAAG,GAAGC,IAAI,CAACC,GAAG,CAACF,GAAG,KAAK,CAAC,CAAC,GAAGN,KAAK,CAACS,MAAM,GAAGH,GAAG,EAAEN,KAAK,CAACS,MAAM,CAAC;EAC7D,IAAIC,IAAI,GAAG,EAAE;EACb,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,GAAG,EAAEK,CAAC,EAAE,EAAE;IAC5BD,IAAI,CAACE,IAAI,CAAC,OAAOZ,KAAK,CAACW,CAAC,CAAC,KAAK,QAAQ,GAAGE,IAAI,CAACC,SAAS,CAACd,KAAK,CAACW,CAAC,CAAC,CAAC,GAAGX,KAAK,CAACW,CAAC,CAAC,CAAC;EAC/E;EACA,KAAK,IAAIA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,IAAI,CAACD,MAAM,EAAEE,CAAC,EAAE,EAAE;IACpC,IAAID,IAAI,CAACpB,OAAO,CAACoB,IAAI,CAACC,CAAC,CAAC,CAAC,KAAKA,CAAC,EAAE,OAAO,KAAK;EAC/C;EACA,OAAO,IAAI;AACb,CAAC;AAED,IAAII,YAAY,GAAG,SAAAA,CAASjB,IAAI,EAAEkB,UAAU,EAAE;EAC5C,IAAIhC,GAAG;EACP,IAAIiC,MAAM,GAAI,CAACD,UAAU,GAAG,CAAC,MAAMA,UAAU,GAAIT,IAAI,CAACW,GAAG,CAAC,EAAE,EAAEF,UAAU,CAACG,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC,CAACZ,MAAM,CAAC,GAAG,CAAC;EAChH,IAAIQ,MAAM,GAAG,CAAC,EAAE;IACd,IAAIK,UAAU,GAAI,CAACxB,IAAI,GAAG,CAAC,MAAMA,IAAI,GAAIS,IAAI,CAACW,GAAG,CAAC,EAAE,EAAEpB,IAAI,CAACqB,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC,CAACZ,MAAM,CAAC,GAAG,CAAC;IAClG,IAAIa,UAAU,GAAGL,MAAM,EAAEjC,GAAG,GAAG,IAAI,MAC9BA,GAAG,GAAGuB,IAAI,CAACgB,KAAK,CAACN,MAAM,GAAGnB,IAAI,CAAC,IAAImB,MAAM,GAAGD,UAAU,CAAC;EAC9D,CAAC,MACIhC,GAAG,GAAGc,IAAI,GAAGkB,UAAU;EAC5B,OAAO,CAAChC,GAAG;AACb,CAAC;AAED,IAAIwC,gBAAgB,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAEC,SAAS,EAAE;EAChD,IAAIA,SAAS,GAAG,CAAC,CAAC,IAAID,CAAC,CAACjB,MAAM,GAAGkB,SAAS,EAAE,OAAO,IAAI;EACvD,OAAOF,CAAC,CAACG,IAAI,CAACF,CAAC,CAAC;AAClB,CAAC;AAED,IAAIG,OAAO,GAAG,SAAAA,CAASC,MAAM,EAAEC,KAAK,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,IAAI,EAAE;EAC1D,IAAIC,IAAI,GAAGD,IAAI,GAAG9D,KAAK,CAACC,OAAO,EAAE6D,IAAI,CAAC7D,OAAO,CAAC,GAAGA,OAAO;EACxD,IAAI+D,KAAK,GAAG;IAAC/B,MAAM,EAACA,MAAM;IAAEhC,OAAO,EAAC8D,IAAI;IAAEpB,YAAY,EAACA,YAAY;IAAES,gBAAgB,EAACA;EAAgB,CAAC;EACvG,IAAIa,OAAO,GAAGH,IAAI,GAAG,CAAC,CAACA,IAAI,CAACG,OAAO,GAAG,KAAK;EAC3C,IAAIC,MAAM,GAAGJ,IAAI,IAAIA,IAAI,CAACI,MAAM,KAAKC,SAAS,GAC5CL,IAAI,CAACI,MAAM,GAAG,KAAK;EAErB,IAAIE,IAAI,GAAG,CAAC,CAAC;EACb,IAAIC,SAAS,GAAG,EAAE;EAClB,IAAIC,MAAM,GAAG,SAAAA,CAAS5C,IAAI,EAAE;IAC1B,IAAId,GAAG,GAAGc,IAAI,IAAE0C,IAAI,CAAC1C,IAAI,CAAC,GAAG,CAAC0C,IAAI,CAAC1C,IAAI,CAAC,IAAI,CAAC,IAAE,CAAC,CAAC;IACjD2C,SAAS,CAAC7B,IAAI,CAAC5B,GAAG,CAAC;IACnB,OAAOA,GAAG;EACZ,CAAC;EAED,IAAI2D,UAAU,GAAG,SAAAA,CAASC,KAAK,EAAE;IAC/B,IAAIlB,CAAC,GAAGb,IAAI,CAACC,SAAS,CAAC8B,KAAK,CAAC;IAC7B,IAAI;MACF,IAAIC,OAAO,GAAG,iBAAiB;MAC/B,OAAOA,OAAO,CAACjB,IAAI,CAACF,CAAC,CAAC,EAAEA,CAAC,GAAGA,CAAC,CAACxC,OAAO,CAAC2D,OAAO,EAAEC,QAAQ,CAAC;MACxD,OAAOpB,CAAC;IACV,CAAC,CAAC,OAAOqB,CAAC,EAAE;MACV,OAAOlC,IAAI,CAACC,SAAS,CAAC8B,KAAK,CAAC;IAC9B;IAEA,SAASE,QAAQA,CAAEE,KAAK,EAAEC,CAAC,EAAE;MAC3B,IAAIR,SAAS,CAACnD,OAAO,CAAC2D,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,IAAIC,KAAK,CAAC,eAAe,CAAC;MACjE,OAAO,OAAO,GAAGD,CAAC,GAAG,MAAM;IAC7B;EACF,CAAC;EAED,IAAIE,eAAe,GAAG,CAAC,CAAC;EACxB,IAAIC,QAAQ,GAAG,SAAAA,CAASC,CAAC,EAAE;IACzB,IAAIF,eAAe,CAACE,CAAC,CAAC,EAAE,OAAOF,eAAe,CAACE,CAAC,CAAC;IACjD,IAAIC,CAAC,GAAGZ,MAAM,CAAC,SAAS,CAAC;IACzBN,KAAK,CAACkB,CAAC,CAAC,GAAG,IAAIC,MAAM,CAACF,CAAC,CAAC;IACxBF,eAAe,CAACE,CAAC,CAAC,GAAGC,CAAC;IACtB,OAAOA,CAAC;EACV,CAAC;EAED,IAAIE,IAAI,GAAG,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,CAAC;EAChF,IAAIC,OAAO,GAAG,SAAAA,CAAA,EAAW;IACvB,IAAIR,CAAC,GAAGO,IAAI,CAACE,KAAK,CAAC,CAAC;IACpBF,IAAI,CAAC5C,IAAI,CAACqC,CAAC,GAACA,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBR,SAAS,CAAC7B,IAAI,CAACqC,CAAC,CAAC;IACjB,OAAOA,CAAC;EACV,CAAC;EAED,IAAIvE,KAAK,GAAG,SAAAA,CAASoB,IAAI,EAAE6D,IAAI,EAAE1B,QAAQ,EAAE2B,MAAM,EAAEC,UAAU,EAAE;IAC7D,IAAIC,UAAU,GAAGH,IAAI,CAACG,UAAU;IAChC,IAAIC,IAAI,GAAGJ,IAAI,CAACI,IAAI;IACpB,IAAIC,KAAK,GAAG,KAAK;IAEjB,IAAIC,KAAK,CAACC,OAAO,CAACP,IAAI,CAACQ,KAAK,CAAC,EAAE;MAAE;MAC/BL,UAAU,GAAG,CAAC,CAAC;MACfH,IAAI,CAACQ,KAAK,CAACC,OAAO,CAAC,UAASC,IAAI,EAAE1D,CAAC,EAAE;QACnCmD,UAAU,CAACnD,CAAC,CAAC,GAAG0D,IAAI;MACtB,CAAC,CAAC;MACFN,IAAI,GAAG,OAAO;MACdC,KAAK,GAAG,IAAI;IACd;IAEA,IAAIM,MAAM,GAAG,CAAC;IACd,IAAIC,KAAK,GAAG,SAAAA,CAASC,GAAG,EAAEC,IAAI,EAAEC,KAAK,EAAE;MACrCC,QAAQ,CAAC,UAAU,CAAC;MACpB,IAAI1C,QAAQ,KAAK,IAAI,EAAE;QACrB0C,QAAQ,CAAC,oDAAoD,CAAC;QAC9D,IAAItC,OAAO,EAAE;UACXsC,QAAQ,CACN,4EAA4E,EAC5EhC,UAAU,CAAC8B,IAAI,IAAI3E,IAAI,CAAC,EACxBe,IAAI,CAACC,SAAS,CAAC0D,GAAG,CAAC,EACnBE,KAAK,IAAI5E,IAAI,EACbe,IAAI,CAACC,SAAS,CAACiD,IAAI,CAAC,EACpBlD,IAAI,CAACC,SAAS,CAAC+C,UAAU,CAC3B,CAAC;QACH,CAAC,MAAM;UACLc,QAAQ,CAAC,6CAA6C,EAAEhC,UAAU,CAAC8B,IAAI,IAAI3E,IAAI,CAAC,EAAEe,IAAI,CAACC,SAAS,CAAC0D,GAAG,CAAC,CAAC;QACxG;MACF;IACF,CAAC;IAED,IAAIb,IAAI,CAACiB,QAAQ,KAAK,IAAI,EAAE;MAC1BN,MAAM,EAAE;MACRK,QAAQ,CAAC,yBAAyB,EAAE7E,IAAI,CAAC;MACzCyE,KAAK,CAAC,aAAa,CAAC;MACpBI,QAAQ,CAAC,UAAU,CAAC;IACtB,CAAC,MAAM;MACLL,MAAM,EAAE;MACRK,QAAQ,CAAC,yBAAyB,EAAE7E,IAAI,CAAC;IAC3C;IAEA,IAAI+E,KAAK,GAAG,EAAE,CAACC,MAAM,CAACf,IAAI,CAAC,CACxBgB,GAAG,CAAC,UAASC,CAAC,EAAE;MACf,IAAIA,CAAC,IAAI,CAACrF,KAAK,CAACsF,cAAc,CAACD,CAAC,CAAC,EAAE;QACjC,MAAM,IAAI9B,KAAK,CAAC,gBAAgB,GAAG8B,CAAC,CAAC;MACvC;MAEA,OAAOrF,KAAK,CAACqF,CAAC,IAAI,KAAK,CAAC,CAAClF,IAAI,CAAC;IAChC,CAAC,CAAC,CACDoF,IAAI,CAAC,MAAM,CAAC,IAAI,MAAM;IAEzB,IAAIL,KAAK,KAAK,MAAM,EAAE;MACpBP,MAAM,EAAE;MACRK,QAAQ,CAAC,cAAc,EAAEE,KAAK,CAAC;MAC/BN,KAAK,CAAC,mBAAmB,CAAC;MAC1BI,QAAQ,CAAC,UAAU,CAAC;IACtB;IAEA,IAAIX,KAAK,EAAE;MACT,IAAIL,IAAI,CAACwB,eAAe,KAAK,KAAK,EAAE;QAClCR,QAAQ,CAAC,uBAAuB,EAAE7E,IAAI,EAAE6D,IAAI,CAACQ,KAAK,CAAC1D,MAAM,CAAC;QAC1D8D,KAAK,CAAC,sBAAsB,CAAC;QAC7BI,QAAQ,CAAC,GAAG,CAAC;MACf,CAAC,MAAM,IAAIhB,IAAI,CAACwB,eAAe,EAAE;QAC/B,IAAIxE,CAAC,GAAG8C,OAAO,CAAC,CAAC;QACjBkB,QAAQ,CAAC,2CAA2C,EAAEhE,CAAC,EAAEgD,IAAI,CAACQ,KAAK,CAAC1D,MAAM,EAAEE,CAAC,EAAEb,IAAI,EAAEa,CAAC,CAAC;QACvFjC,KAAK,CAACoB,IAAI,GAAC,GAAG,GAACa,CAAC,GAAC,GAAG,EAAEgD,IAAI,CAACwB,eAAe,EAAElD,QAAQ,EAAE2B,MAAM,EAAEC,UAAU,CAACiB,MAAM,CAAC,iBAAiB,CAAC,CAAC;QACnGH,QAAQ,CAAC,GAAG,CAAC;MACf;IACF;IAEA,IAAIhB,IAAI,CAACyB,MAAM,IAAIjD,IAAI,CAACwB,IAAI,CAACyB,MAAM,CAAC,EAAE;MACpC,IAAIrB,IAAI,KAAK,QAAQ,IAAI1F,OAAO,CAACsF,IAAI,CAACyB,MAAM,CAAC,EAAET,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACS,MAAM,CAACN,IAAI,CAAC,CAAC;MACxF,IAAIwD,CAAC,GAAGZ,MAAM,CAAC,QAAQ,CAAC;MACxBN,KAAK,CAACkB,CAAC,CAAC,GAAGnB,IAAI,CAACwB,IAAI,CAACyB,MAAM,CAAC;MAE5B,IAAI,OAAOhD,KAAK,CAACkB,CAAC,CAAC,KAAK,UAAU,EAAEqB,QAAQ,CAAC,gBAAgB,EAAErB,CAAC,EAAExD,IAAI,CAAC,MAClE6E,QAAQ,CAAC,sCAAsC,EAAErB,CAAC,EAAExD,IAAI,EAAE,OAAO6D,IAAI,CAAChC,SAAS,KAAK,WAAW,GAAG,CAAC,CAAC,GAAGgC,IAAI,CAAChC,SAAS,CAAC;MAC3H4C,KAAK,CAAC,UAAU,GAACZ,IAAI,CAACyB,MAAM,GAAC,SAAS,CAAC;MACvCT,QAAQ,CAAC,GAAG,CAAC;MACb,IAAIZ,IAAI,KAAK,QAAQ,IAAI1F,OAAO,CAACsF,IAAI,CAACyB,MAAM,CAAC,EAAET,QAAQ,CAAC,GAAG,CAAC;IAC9D;IAEA,IAAIV,KAAK,CAACC,OAAO,CAACP,IAAI,CAACiB,QAAQ,CAAC,EAAE;MAChC,IAAItB,CAAC,GAAGZ,MAAM,CAAC,SAAS,CAAC;MACzBiC,QAAQ,CAAC,YAAY,EAAErB,CAAC,CAAC;MACzB,IAAI+B,aAAa,GAAG,SAAAA,CAAUC,GAAG,EAAE;QACjC,IAAIb,IAAI,GAAGzG,MAAM,CAAC8B,IAAI,EAAEwF,GAAG,CAAC;QAC5BX,QAAQ,CAAC,yBAAyB,EAAEF,IAAI,CAAC;QACzCF,KAAK,CAAC,aAAa,EAAEE,IAAI,CAAC;QAC1BE,QAAQ,CAAC,MAAM,EAAErB,CAAC,CAAC;QACnBqB,QAAQ,CAAC,GAAG,CAAC;MACf,CAAC;MACDA,QAAQ,CAAC,aAAa,EAAEZ,IAAI,KAAK,QAAQ,GAAGpE,KAAK,CAACM,MAAM,CAACH,IAAI,CAAC,GAAG,MAAM,CAAC;MACxE6D,IAAI,CAACiB,QAAQ,CAACG,GAAG,CAACM,aAAa,CAAC;MAChCV,QAAQ,CAAC,GAAG,CAAC;MACb,IAAI,CAACrC,MAAM,EAAE;QACXqC,QAAQ,CAAC,iBAAiB,EAAErB,CAAC,CAAC;QAC9BgB,MAAM,EAAE;MACV;IACF;IAEA,IAAIX,IAAI,CAAC4B,WAAW,EAAE;MACpB,IAAIxB,IAAI,KAAK,OAAO,EAAEY,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACK,KAAK,CAACF,IAAI,CAAC,CAAC;MAC9D6E,QAAQ,CAAC,0BAA0B,EAAE7E,IAAI,EAAE6D,IAAI,CAAC6B,QAAQ,IAAI,CAAC,CAAC,CAAC;MAC/DjB,KAAK,CAAC,gBAAgB,CAAC;MACvBI,QAAQ,CAAC,GAAG,CAAC;MACb,IAAIZ,IAAI,KAAK,OAAO,EAAEY,QAAQ,CAAC,GAAG,CAAC;IACrC;IAEA,IAAIhB,IAAI,CAAC8B,IAAI,EAAE;MACb,IAAIC,OAAO,GAAG/B,IAAI,CAAC8B,IAAI,CAACE,IAAI,CAAC,UAASC,CAAC,EAAE;QACvC,OAAO,OAAOA,CAAC,KAAK,QAAQ;MAC9B,CAAC,CAAC;MAEF,IAAIC,OAAO,GAAGH,OAAO,GACnB,UAASE,CAAC,EAAE;QACV,OAAO,iBAAiB,GAAC9F,IAAI,GAAC,GAAG,GAAC,sBAAsB,GAACe,IAAI,CAACC,SAAS,CAAC8E,CAAC,CAAC,GAAC,GAAG;MAChF,CAAC,GACD,UAASA,CAAC,EAAE;QACV,OAAO9F,IAAI,GAAC,OAAO,GAACe,IAAI,CAACC,SAAS,CAAC8E,CAAC,CAAC;MACvC,CAAC;MAEHjB,QAAQ,CAAC,WAAW,EAAEhB,IAAI,CAAC8B,IAAI,CAACV,GAAG,CAACc,OAAO,CAAC,CAACX,IAAI,CAAC,MAAM,CAAC,IAAI,OAAO,CAAC;MACrEX,KAAK,CAAC,uBAAuB,CAAC;MAC9BI,QAAQ,CAAC,GAAG,CAAC;IACf;IAEA,IAAIhB,IAAI,CAACmC,YAAY,EAAE;MACrB,IAAI/B,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACM,MAAM,CAACH,IAAI,CAAC,CAAC;MAEhEjB,MAAM,CAACC,IAAI,CAAC6E,IAAI,CAACmC,YAAY,CAAC,CAAC1B,OAAO,CAAC,UAAS2B,GAAG,EAAE;QACnD,IAAIC,IAAI,GAAGrC,IAAI,CAACmC,YAAY,CAACC,GAAG,CAAC;QACjC,IAAI,OAAOC,IAAI,KAAK,QAAQ,EAAEA,IAAI,GAAG,CAACA,IAAI,CAAC;QAE3C,IAAIC,MAAM,GAAG,SAAAA,CAAShH,CAAC,EAAE;UACvB,OAAOjB,MAAM,CAAC8B,IAAI,EAAEb,CAAC,CAAC,GAAG,gBAAgB;QAC3C,CAAC;QAED,IAAIgF,KAAK,CAACC,OAAO,CAAC8B,IAAI,CAAC,EAAE;UACvBrB,QAAQ,CAAC,kCAAkC,EAAE3G,MAAM,CAAC8B,IAAI,EAAEiG,GAAG,CAAC,EAAEC,IAAI,CAACjB,GAAG,CAACkB,MAAM,CAAC,CAACf,IAAI,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC;UACxGX,KAAK,CAAC,sBAAsB,CAAC;UAC7BI,QAAQ,CAAC,GAAG,CAAC;QACf;QACA,IAAI,OAAOqB,IAAI,KAAK,QAAQ,EAAE;UAC5BrB,QAAQ,CAAC,yBAAyB,EAAE3G,MAAM,CAAC8B,IAAI,EAAEiG,GAAG,CAAC,CAAC;UACtDrH,KAAK,CAACoB,IAAI,EAAEkG,IAAI,EAAE/D,QAAQ,EAAE2B,MAAM,EAAEC,UAAU,CAACiB,MAAM,CAAC,CAAC,cAAc,EAAEiB,GAAG,CAAC,CAAC,CAAC;UAC7EpB,QAAQ,CAAC,GAAG,CAAC;QACf;MACF,CAAC,CAAC;MAEF,IAAIZ,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,GAAG,CAAC;IACtC;IAEA,IAAIhB,IAAI,CAACuC,oBAAoB,IAAIvC,IAAI,CAACuC,oBAAoB,KAAK,KAAK,EAAE;MACpE,IAAInC,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACM,MAAM,CAACH,IAAI,CAAC,CAAC;MAEhE,IAAIa,CAAC,GAAG8C,OAAO,CAAC,CAAC;MACjB,IAAI3E,IAAI,GAAG4D,MAAM,CAAC,MAAM,CAAC;MAEzB,IAAIyD,SAAS,GAAG,SAAAA,CAAS9C,CAAC,EAAE;QAC1B,OAAOvE,IAAI,GAAC,GAAG,GAAC6B,CAAC,GAAC,QAAQ,GAACE,IAAI,CAACC,SAAS,CAACuC,CAAC,CAAC;MAC9C,CAAC;MAED,IAAI+C,MAAM,GAAG,SAAAA,CAAS/C,CAAC,EAAE;QACvB,OAAO,GAAG,GAACD,QAAQ,CAACC,CAAC,CAAC,GAAC,QAAQ,GAACvE,IAAI,GAAC,GAAG,GAAC6B,CAAC,GAAC,IAAI;MACjD,CAAC;MAED,IAAI0F,cAAc,GAAGxH,MAAM,CAACC,IAAI,CAACgF,UAAU,IAAI,CAAC,CAAC,CAAC,CAACiB,GAAG,CAACoB,SAAS,CAAC,CAC9DrB,MAAM,CAACjG,MAAM,CAACC,IAAI,CAAC6E,IAAI,CAAC2C,iBAAiB,IAAI,CAAC,CAAC,CAAC,CAACvB,GAAG,CAACqB,MAAM,CAAC,CAAC,CAC7DlB,IAAI,CAAC,MAAM,CAAC,IAAI,MAAM;MAEzBP,QAAQ,CAAC,0BAA0B,EAAE7F,IAAI,EAAEgB,IAAI,CAAC,CAC7C,0CAA0C,EAAEa,CAAC,EAAEA,CAAC,EAAE7B,IAAI,EAAE6B,CAAC,CAAC,CACxD,WAAW,EAAE0F,cAAc,CAAC;MAEjC,IAAI1C,IAAI,CAACuC,oBAAoB,KAAK,KAAK,EAAE;QACvC,IAAItC,MAAM,EAAEe,QAAQ,CAAC,WAAW,EAAE7E,IAAI,GAAC,GAAG,GAAChB,IAAI,GAAC,GAAG,GAAC6B,CAAC,GAAC,IAAI,CAAC;QAC3D4D,KAAK,CAAC,2BAA2B,EAAE,IAAI,EAAE1D,IAAI,CAACC,SAAS,CAAChB,IAAI,GAAC,GAAG,CAAC,GAAG,KAAK,GAAGhB,IAAI,GAAG,GAAG,GAAC6B,CAAC,GAAC,GAAG,CAAC;MAC/F,CAAC,MAAM;QACLjC,KAAK,CAACoB,IAAI,GAAC,GAAG,GAAChB,IAAI,GAAC,GAAG,GAAC6B,CAAC,GAAC,IAAI,EAAEgD,IAAI,CAACuC,oBAAoB,EAAEjE,QAAQ,EAAE2B,MAAM,EAAEC,UAAU,CAACiB,MAAM,CAAC,CAAC,sBAAsB,CAAC,CAAC,CAAC;MAC3H;MAEAH,QAAQ,CACH,GAAG,CAAC,CACN,GAAG,CAAC;MAEP,IAAIZ,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,GAAG,CAAC;IACtC;IAEA,IAAIhB,IAAI,CAAC4C,IAAI,EAAE;MACb,IAAI5H,GAAG,GAAGL,GAAG,CAAC0D,IAAI,EAAEE,IAAI,IAAIA,IAAI,CAACsE,OAAO,IAAI,CAAC,CAAC,EAAE7C,IAAI,CAAC4C,IAAI,CAAC;MAC1D,IAAI5H,GAAG,EAAE;QACP,IAAI8H,EAAE,GAAG1E,KAAK,CAAC4B,IAAI,CAAC4C,IAAI,CAAC;QACzB,IAAI,CAACE,EAAE,EAAE;UACP1E,KAAK,CAAC4B,IAAI,CAAC4C,IAAI,CAAC,GAAG,SAASG,KAAKA,CAACC,IAAI,EAAE;YACtC,OAAOF,EAAE,CAACE,IAAI,CAAC;UACjB,CAAC;UACDF,EAAE,GAAG5E,OAAO,CAAClD,GAAG,EAAEoD,KAAK,EAAEC,IAAI,EAAE,KAAK,EAAEE,IAAI,CAAC;QAC7C;QACA,IAAIoB,CAAC,GAAGZ,MAAM,CAAC,KAAK,CAAC;QACrBN,KAAK,CAACkB,CAAC,CAAC,GAAGmD,EAAE;QACb9B,QAAQ,CAAC,kBAAkB,EAAErB,CAAC,EAAExD,IAAI,CAAC;QACrCyE,KAAK,CAAC,kCAAkC,CAAC;QACzCI,QAAQ,CAAC,GAAG,CAAC;MACf;IACF;IAEA,IAAIhB,IAAI,CAACiD,GAAG,EAAE;MACZ,IAAIC,IAAI,GAAGnE,MAAM,CAAC,MAAM,CAAC;MACzBiC,QAAQ,CAAC,iBAAiB,EAAEkC,IAAI,CAAC;MACjCnI,KAAK,CAACoB,IAAI,EAAE6D,IAAI,CAACiD,GAAG,EAAE,KAAK,EAAEhD,MAAM,EAAEC,UAAU,CAACiB,MAAM,CAAC,KAAK,CAAC,CAAC;MAC9DH,QAAQ,CAAC,sBAAsB,EAAEkC,IAAI,CAAC;MACtCtC,KAAK,CAAC,yBAAyB,CAAC;MAChCI,QAAQ,CAAC,UAAU,CAAC,CACjB,aAAa,EAAEkC,IAAI,CAAC,CACtB,GAAG,CAAC;IACP;IAEA,IAAIlD,IAAI,CAACQ,KAAK,IAAI,CAACH,KAAK,EAAE;MACxB,IAAID,IAAI,KAAK,OAAO,EAAEY,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACK,KAAK,CAACF,IAAI,CAAC,CAAC;MAE9D,IAAIa,CAAC,GAAG8C,OAAO,CAAC,CAAC;MACjBkB,QAAQ,CAAC,0CAA0C,EAAEhE,CAAC,EAAEA,CAAC,EAAEb,IAAI,EAAEa,CAAC,CAAC;MACnEjC,KAAK,CAACoB,IAAI,GAAC,GAAG,GAACa,CAAC,GAAC,GAAG,EAAEgD,IAAI,CAACQ,KAAK,EAAElC,QAAQ,EAAE2B,MAAM,EAAEC,UAAU,CAACiB,MAAM,CAAC,OAAO,CAAC,CAAC;MAC/EH,QAAQ,CAAC,GAAG,CAAC;MAEb,IAAIZ,IAAI,KAAK,OAAO,EAAEY,QAAQ,CAAC,GAAG,CAAC;IACrC;IAEA,IAAIhB,IAAI,CAAC2C,iBAAiB,EAAE;MAC1B,IAAIvC,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACM,MAAM,CAACH,IAAI,CAAC,CAAC;MAChE,IAAIhB,IAAI,GAAG4D,MAAM,CAAC,MAAM,CAAC;MACzB,IAAI/B,CAAC,GAAG8C,OAAO,CAAC,CAAC;MACjBkB,QAAQ,CACL,0BAA0B,EAAE7F,IAAI,EAAEgB,IAAI,CAAC,CACvC,0CAA0C,EAAEa,CAAC,EAAEA,CAAC,EAAE7B,IAAI,EAAE6B,CAAC,CAAC;MAE7D9B,MAAM,CAACC,IAAI,CAAC6E,IAAI,CAAC2C,iBAAiB,CAAC,CAAClC,OAAO,CAAC,UAAS2B,GAAG,EAAE;QACxD,IAAI1C,CAAC,GAAGD,QAAQ,CAAC2C,GAAG,CAAC;QACrBpB,QAAQ,CAAC,oBAAoB,EAAEtB,CAAC,EAAEvE,IAAI,GAAC,GAAG,GAAC6B,CAAC,GAAC,GAAG,CAAC;QACjDjC,KAAK,CAACoB,IAAI,GAAC,GAAG,GAAChB,IAAI,GAAC,GAAG,GAAC6B,CAAC,GAAC,IAAI,EAAEgD,IAAI,CAAC2C,iBAAiB,CAACP,GAAG,CAAC,EAAE9D,QAAQ,EAAE2B,MAAM,EAAEC,UAAU,CAACiB,MAAM,CAAC,CAAC,mBAAmB,EAAEiB,GAAG,CAAC,CAAC,CAAC;QAC7HpB,QAAQ,CAAC,GAAG,CAAC;MACf,CAAC,CAAC;MAEFA,QAAQ,CAAC,GAAG,CAAC;MACb,IAAIZ,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,GAAG,CAAC;IACtC;IAEA,IAAIhB,IAAI,CAACd,OAAO,EAAE;MAChB,IAAIQ,CAAC,GAAGD,QAAQ,CAACO,IAAI,CAACd,OAAO,CAAC;MAC9B,IAAIkB,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACS,MAAM,CAACN,IAAI,CAAC,CAAC;MAChE6E,QAAQ,CAAC,wCAAwC,EAAEtB,CAAC,EAAEvD,IAAI,EAAE,OAAO6D,IAAI,CAAChC,SAAS,KAAK,WAAW,GAAG,CAAC,CAAC,GAAGgC,IAAI,CAAChC,SAAS,CAAC;MACxH4C,KAAK,CAAC,kBAAkB,CAAC;MACzBI,QAAQ,CAAC,GAAG,CAAC;MACb,IAAIZ,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,GAAG,CAAC;IACtC;IAEA,IAAIhB,IAAI,CAACmD,KAAK,EAAE;MACdnD,IAAI,CAACmD,KAAK,CAAC1C,OAAO,CAAC,UAAS2C,GAAG,EAAEhB,GAAG,EAAE;QACpCrH,KAAK,CAACoB,IAAI,EAAEiH,GAAG,EAAE9E,QAAQ,EAAE2B,MAAM,EAAEC,UAAU,CAACiB,MAAM,CAAC,CAAC,OAAO,EAAEiB,GAAG,CAAC,CAAC,CAAC;MACvE,CAAC,CAAC;IACJ;IAEA,IAAIpC,IAAI,CAACqD,KAAK,IAAIrD,IAAI,CAACqD,KAAK,CAACvG,MAAM,EAAE;MACnC,IAAIoG,IAAI,GAAGnE,MAAM,CAAC,MAAM,CAAC;MAEzBiB,IAAI,CAACqD,KAAK,CAAC5C,OAAO,CAAC,UAAS2C,GAAG,EAAEpG,CAAC,EAAE;QAClC,IAAIA,CAAC,KAAK,CAAC,EAAE;UACXgE,QAAQ,CAAC,iBAAiB,EAAEkC,IAAI,CAAC;QACnC,CAAC,MAAM;UACLlC,QAAQ,CAAC,sBAAsB,EAAEkC,IAAI,CAAC,CACnC,aAAa,EAAEA,IAAI,CAAC;QACzB;QACAnI,KAAK,CAACoB,IAAI,EAAEiH,GAAG,EAAE,KAAK,EAAE,KAAK,EAAElD,UAAU,CAAC;MAC5C,CAAC,CAAC;MACFF,IAAI,CAACqD,KAAK,CAAC5C,OAAO,CAAC,UAAS2C,GAAG,EAAEpG,CAAC,EAAE;QAClC,IAAIA,CAAC,EAAEgE,QAAQ,CAAC,GAAG,CAAC;MACtB,CAAC,CAAC;MACFA,QAAQ,CAAC,sBAAsB,EAAEkC,IAAI,CAAC;MACtCtC,KAAK,CAAC,kBAAkB,CAAC;MACzBI,QAAQ,CAAC,GAAG,CAAC;IACf;IAEA,IAAIhB,IAAI,CAACsD,KAAK,IAAItD,IAAI,CAACsD,KAAK,CAACxG,MAAM,EAAE;MACnC,IAAIoG,IAAI,GAAGnE,MAAM,CAAC,MAAM,CAAC;MACzB,IAAIwE,MAAM,GAAGxE,MAAM,CAAC,QAAQ,CAAC;MAE7BiC,QAAQ,CACL,iBAAiB,EAAEkC,IAAI,CAAC,CACxB,YAAY,EAAEK,MAAM,CAAC;MAExBvD,IAAI,CAACsD,KAAK,CAAC7C,OAAO,CAAC,UAAS2C,GAAG,EAAEpG,CAAC,EAAE;QAClCjC,KAAK,CAACoB,IAAI,EAAEiH,GAAG,EAAE,KAAK,EAAE,KAAK,EAAElD,UAAU,CAAC;QAC1Cc,QAAQ,CAAC,sBAAsB,EAAEkC,IAAI,CAAC,CACnC,MAAM,EAAEK,MAAM,CAAC,CACjB,UAAU,CAAC,CACT,aAAa,EAAEL,IAAI,CAAC,CACtB,GAAG,CAAC;MACP,CAAC,CAAC;MAEFlC,QAAQ,CAAC,iBAAiB,EAAEuC,MAAM,CAAC;MACnC3C,KAAK,CAAC,qCAAqC,CAAC;MAC5CI,QAAQ,CAAC,GAAG,CAAC;IACf;IAEA,IAAIhB,IAAI,CAAC3C,UAAU,KAAKuB,SAAS,EAAE;MACjC,IAAIwB,IAAI,KAAK,QAAQ,IAAIA,IAAI,KAAK,SAAS,EAAEY,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACO,MAAM,CAACJ,IAAI,CAAC,CAAC;MAEtF6E,QAAQ,CAAC,8BAA8B,EAAE7E,IAAI,EAAE6D,IAAI,CAAC3C,UAAU,CAAC;MAE/DuD,KAAK,CAAC,iBAAiB,CAAC;MACxBI,QAAQ,CAAC,GAAG,CAAC;MAEb,IAAIZ,IAAI,KAAK,QAAQ,IAAIA,IAAI,KAAK,SAAS,EAAEY,QAAQ,CAAC,GAAG,CAAC;IAC5D;IAEA,IAAIhB,IAAI,CAACwD,aAAa,KAAK5E,SAAS,EAAE;MACpC,IAAIwB,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACM,MAAM,CAACH,IAAI,CAAC,CAAC;MAEhE6E,QAAQ,CAAC,oCAAoC,EAAE7E,IAAI,EAAE6D,IAAI,CAACwD,aAAa,CAAC;MACxE5C,KAAK,CAAC,kCAAkC,CAAC;MACzCI,QAAQ,CAAC,GAAG,CAAC;MAEb,IAAIZ,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,GAAG,CAAC;IACtC;IAEA,IAAIhB,IAAI,CAACyD,aAAa,KAAK7E,SAAS,EAAE;MACpC,IAAIwB,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACM,MAAM,CAACH,IAAI,CAAC,CAAC;MAEhE6E,QAAQ,CAAC,oCAAoC,EAAE7E,IAAI,EAAE6D,IAAI,CAACyD,aAAa,CAAC;MACxE7C,KAAK,CAAC,kCAAkC,CAAC;MACzCI,QAAQ,CAAC,GAAG,CAAC;MAEb,IAAIZ,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,GAAG,CAAC;IACtC;IAEA,IAAIhB,IAAI,CAAC6B,QAAQ,KAAKjD,SAAS,EAAE;MAC/B,IAAIwB,IAAI,KAAK,OAAO,EAAEY,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACK,KAAK,CAACF,IAAI,CAAC,CAAC;MAE9D6E,QAAQ,CAAC,uBAAuB,EAAE7E,IAAI,EAAE6D,IAAI,CAAC6B,QAAQ,CAAC;MACtDjB,KAAK,CAAC,6BAA6B,CAAC;MACpCI,QAAQ,CAAC,GAAG,CAAC;MAEb,IAAIZ,IAAI,KAAK,OAAO,EAAEY,QAAQ,CAAC,GAAG,CAAC;IACrC;IAEA,IAAIhB,IAAI,CAAC0D,QAAQ,KAAK9E,SAAS,EAAE;MAC/B,IAAIwB,IAAI,KAAK,OAAO,EAAEY,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACK,KAAK,CAACF,IAAI,CAAC,CAAC;MAE9D6E,QAAQ,CAAC,uBAAuB,EAAE7E,IAAI,EAAE6D,IAAI,CAAC0D,QAAQ,CAAC;MACtD9C,KAAK,CAAC,6BAA6B,CAAC;MACpCI,QAAQ,CAAC,GAAG,CAAC;MAEb,IAAIZ,IAAI,KAAK,OAAO,EAAEY,QAAQ,CAAC,GAAG,CAAC;IACrC;IAEA,IAAIhB,IAAI,CAAChC,SAAS,KAAKY,SAAS,EAAE;MAChC,IAAIwB,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACS,MAAM,CAACN,IAAI,CAAC,CAAC;MAEhE6E,QAAQ,CAAC,uBAAuB,EAAE7E,IAAI,EAAE6D,IAAI,CAAChC,SAAS,CAAC;MACvD4C,KAAK,CAAC,gCAAgC,CAAC;MACvCI,QAAQ,CAAC,GAAG,CAAC;MAEb,IAAIZ,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,GAAG,CAAC;IACtC;IAEA,IAAIhB,IAAI,CAAC2D,SAAS,KAAK/E,SAAS,EAAE;MAChC,IAAIwB,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACS,MAAM,CAACN,IAAI,CAAC,CAAC;MAEhE6E,QAAQ,CAAC,uBAAuB,EAAE7E,IAAI,EAAE6D,IAAI,CAAC2D,SAAS,CAAC;MACvD/C,KAAK,CAAC,8BAA8B,CAAC;MACrCI,QAAQ,CAAC,GAAG,CAAC;MAEb,IAAIZ,IAAI,KAAK,QAAQ,EAAEY,QAAQ,CAAC,GAAG,CAAC;IACtC;IAEA,IAAIhB,IAAI,CAAC4D,OAAO,KAAKhF,SAAS,EAAE;MAC9B,IAAIwB,IAAI,KAAK,QAAQ,IAAIA,IAAI,KAAK,SAAS,EAAEY,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACO,MAAM,CAACJ,IAAI,CAAC,CAAC;MAEtF6E,QAAQ,CAAC,iBAAiB,EAAE7E,IAAI,EAAE6D,IAAI,CAAC6D,gBAAgB,GAAG,IAAI,GAAG,GAAG,EAAE7D,IAAI,CAAC4D,OAAO,CAAC;MACnFhD,KAAK,CAAC,sBAAsB,CAAC;MAC7BI,QAAQ,CAAC,GAAG,CAAC;MAEb,IAAIZ,IAAI,KAAK,QAAQ,IAAIA,IAAI,KAAK,SAAS,EAAEY,QAAQ,CAAC,GAAG,CAAC;IAC5D;IAEA,IAAIhB,IAAI,CAAC8D,OAAO,KAAKlF,SAAS,EAAE;MAC9B,IAAIwB,IAAI,KAAK,QAAQ,IAAIA,IAAI,KAAK,SAAS,EAAEY,QAAQ,CAAC,WAAW,EAAEhF,KAAK,CAACO,MAAM,CAACJ,IAAI,CAAC,CAAC;MAEtF6E,QAAQ,CAAC,iBAAiB,EAAE7E,IAAI,EAAE6D,IAAI,CAAC+D,gBAAgB,GAAG,IAAI,GAAG,GAAG,EAAE/D,IAAI,CAAC8D,OAAO,CAAC;MACnFlD,KAAK,CAAC,sBAAsB,CAAC;MAC7BI,QAAQ,CAAC,GAAG,CAAC;MAEb,IAAIZ,IAAI,KAAK,QAAQ,IAAIA,IAAI,KAAK,SAAS,EAAEY,QAAQ,CAAC,GAAG,CAAC;IAC5D;IAEA,IAAIb,UAAU,EAAE;MACdjF,MAAM,CAACC,IAAI,CAACgF,UAAU,CAAC,CAACM,OAAO,CAAC,UAASf,CAAC,EAAE;QAC1C,IAAIY,KAAK,CAACC,OAAO,CAACH,IAAI,CAAC,IAAIA,IAAI,CAACzE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAEqF,QAAQ,CAAC,oBAAoB,EAAE7E,IAAI,CAAC;QAE5FpB,KAAK,CACHV,MAAM,CAAC8B,IAAI,EAAEuD,CAAC,CAAC,EACfS,UAAU,CAACT,CAAC,CAAC,EACbpB,QAAQ,EACR2B,MAAM,EACNC,UAAU,CAACiB,MAAM,CAACd,KAAK,GAAGX,CAAC,GAAG,CAAC,YAAY,EAAEA,CAAC,CAAC,CACjD,CAAC;QAED,IAAIY,KAAK,CAACC,OAAO,CAACH,IAAI,CAAC,IAAIA,IAAI,CAACzE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAEqF,QAAQ,CAAC,GAAG,CAAC;MACvE,CAAC,CAAC;IACJ;IAEA,OAAOL,MAAM,EAAE,EAAEK,QAAQ,CAAC,GAAG,CAAC;EAChC,CAAC;EAED,IAAIA,QAAQ,GAAGzG,MAAM,CAClB,2BAA2B;EAC1B;EAAA,CACC,qCAAqC,CAAC,CACtC,wBAAwB,CAAC,CACzB,gBAAgB,CAAC;EAEtBQ,KAAK,CAAC,MAAM,EAAEoD,MAAM,EAAEG,QAAQ,EAAEC,IAAI,IAAIA,IAAI,CAAC0B,MAAM,EAAE,EAAE,CAAC;EAExDe,QAAQ,CACH,qBAAqB,CAAC,CACxB,GAAG,CAAC;EAEPA,QAAQ,GAAGA,QAAQ,CAACgD,UAAU,CAACvF,KAAK,CAAC;EACrCuC,QAAQ,CAACiD,MAAM,GAAG,IAAI;EAEtB,IAAI/I,MAAM,CAACgJ,cAAc,EAAE;IACzBhJ,MAAM,CAACgJ,cAAc,CAAClD,QAAQ,EAAE,OAAO,EAAE;MACvCrG,GAAG,EAAE,SAAAA,CAAA,EAAW;QACd,IAAI,CAACqG,QAAQ,CAACiD,MAAM,EAAE,OAAO,EAAE;QAC/B,OAAOjD,QAAQ,CAACiD,MAAM,CAAC7C,GAAG,CAAC,UAAS3F,GAAG,EAAE;UACvC,OAAOA,GAAG,CAACwD,KAAK,GAAG,GAAG,GAAGxD,GAAG,CAAC0I,OAAO;QACtC,CAAC,CAAC,CAAC5C,IAAI,CAAC,IAAI,CAAC;MACf;IACF,CAAC,CAAC;EACJ;EAEAP,QAAQ,CAACoD,MAAM,GAAG,YAAW;IAC3B,OAAOjG,MAAM;EACf,CAAC;EAED,OAAO6C,QAAQ;AACjB,CAAC;AAEDqD,MAAM,CAACC,OAAO,GAAG,UAASnG,MAAM,EAAEI,IAAI,EAAE;EACtC,IAAI,OAAOJ,MAAM,KAAK,QAAQ,EAAEA,MAAM,GAAGjB,IAAI,CAACqH,KAAK,CAACpG,MAAM,CAAC;EAC3D,OAAOD,OAAO,CAACC,MAAM,EAAE,CAAC,CAAC,EAAEA,MAAM,EAAE,IAAI,EAAEI,IAAI,CAAC;AAChD,CAAC;AAED8F,MAAM,CAACC,OAAO,CAACrE,MAAM,GAAG,UAAS9B,MAAM,EAAEI,IAAI,EAAE;EAC7C,IAAIyC,QAAQ,GAAGqD,MAAM,CAACC,OAAO,CAACnG,MAAM,EAAE1D,KAAK,CAAC8D,IAAI,EAAE;IAAC0B,MAAM,EAAE;EAAI,CAAC,CAAC,CAAC;EAClE,OAAO,UAASmD,GAAG,EAAE;IACnBpC,QAAQ,CAACoC,GAAG,CAAC;IACb,OAAOA,GAAG;EACZ,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}