{"ast":null,"code":"\"use strict\";\n\n/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decodeMethodReturn = exports.encodeMethodABI = exports.decodeEventABI = exports.encodeEventABI = void 0;\nconst web3_utils_1 = require(\"web3-utils\");\nconst web3_types_1 = require(\"web3-types\");\nconst web3_eth_abi_1 = require(\"web3-eth-abi\");\nconst web3_eth_1 = require(\"web3-eth\");\nconst web3_errors_1 = require(\"web3-errors\");\nconst encodeEventABI = ({\n  address\n}, event, options) => {\n  var _a, _b;\n  const topics = options === null || options === void 0 ? void 0 : options.topics;\n  const filter = (_a = options === null || options === void 0 ? void 0 : options.filter) !== null && _a !== void 0 ? _a : {};\n  const opts = {};\n  if (!(0, web3_utils_1.isNullish)(options === null || options === void 0 ? void 0 : options.fromBlock)) {\n    opts.fromBlock = (0, web3_utils_1.format)(web3_eth_1.blockSchema.properties.number, options === null || options === void 0 ? void 0 : options.fromBlock, {\n      number: web3_types_1.FMT_NUMBER.HEX,\n      bytes: web3_types_1.FMT_BYTES.HEX\n    });\n  }\n  if (!(0, web3_utils_1.isNullish)(options === null || options === void 0 ? void 0 : options.toBlock)) {\n    opts.toBlock = (0, web3_utils_1.format)(web3_eth_1.blockSchema.properties.number, options === null || options === void 0 ? void 0 : options.toBlock, {\n      number: web3_types_1.FMT_NUMBER.HEX,\n      bytes: web3_types_1.FMT_BYTES.HEX\n    });\n  }\n  if (topics && Array.isArray(topics)) {\n    opts.topics = [...topics];\n  } else {\n    opts.topics = [];\n    // add event signature\n    if (event && !event.anonymous && event.name !== 'ALLEVENTS') {\n      opts.topics.push((_b = event.signature) !== null && _b !== void 0 ? _b : (0, web3_eth_abi_1.encodeEventSignature)((0, web3_eth_abi_1.jsonInterfaceMethodToString)(event)));\n    }\n    // add event topics (indexed arguments)\n    if (event.name !== 'ALLEVENTS' && event.inputs) {\n      for (const input of event.inputs) {\n        if (!input.indexed) {\n          continue;\n        }\n        const value = filter[input.name];\n        if (!value) {\n          // eslint-disable-next-line no-null/no-null\n          opts.topics.push(null);\n          continue;\n        }\n        // TODO: https://github.com/ethereum/web3.js/issues/344\n        // TODO: deal properly with components\n        if (Array.isArray(value)) {\n          opts.topics.push(value.map(v => (0, web3_eth_abi_1.encodeParameter)(input.type, v)));\n        } else if (input.type === 'string') {\n          opts.topics.push((0, web3_utils_1.keccak256)(value));\n        } else {\n          opts.topics.push((0, web3_eth_abi_1.encodeParameter)(input.type, value));\n        }\n      }\n    }\n  }\n  if (!opts.topics.length) delete opts.topics;\n  if (address) {\n    opts.address = address.toLowerCase();\n  }\n  return opts;\n};\nexports.encodeEventABI = encodeEventABI;\nconst decodeEventABI = (event, data, jsonInterface, returnFormat = web3_types_1.DEFAULT_RETURN_FORMAT) => {\n  var _a, _b, _c, _d, _e;\n  let modifiedEvent = Object.assign({}, event);\n  const result = (0, web3_utils_1.format)(web3_eth_1.logSchema, data, returnFormat);\n  // if allEvents get the right event\n  if (modifiedEvent.name === 'ALLEVENTS') {\n    const matchedEvent = jsonInterface.find(j => j.signature === data.topics[0]);\n    if (matchedEvent) {\n      modifiedEvent = matchedEvent;\n    } else {\n      modifiedEvent = {\n        anonymous: true\n      };\n    }\n  }\n  // create empty inputs if none are present (e.g. anonymous events on allEvents)\n  modifiedEvent.inputs = (_b = (_a = modifiedEvent.inputs) !== null && _a !== void 0 ? _a : event.inputs) !== null && _b !== void 0 ? _b : [];\n  // Handle case where an event signature shadows the current ABI with non-identical\n  // arg indexing. If # of topics doesn't match, event is anon.\n  if (!modifiedEvent.anonymous) {\n    let indexedInputs = 0;\n    ((_c = modifiedEvent.inputs) !== null && _c !== void 0 ? _c : []).forEach(input => {\n      if (input.indexed) {\n        indexedInputs += 1;\n      }\n    });\n    if (indexedInputs > 0 && (data === null || data === void 0 ? void 0 : data.topics) && (data === null || data === void 0 ? void 0 : data.topics.length) !== indexedInputs + 1) {\n      // checks if event is anonymous\n      modifiedEvent = Object.assign(Object.assign({}, modifiedEvent), {\n        anonymous: true,\n        inputs: []\n      });\n    }\n  }\n  const argTopics = modifiedEvent.anonymous ? data.topics : ((_d = data.topics) !== null && _d !== void 0 ? _d : []).slice(1);\n  return Object.assign(Object.assign({}, result), {\n    returnValues: (0, web3_eth_abi_1.decodeLog)([...((_e = modifiedEvent.inputs) !== null && _e !== void 0 ? _e : [])], data.data, argTopics),\n    event: modifiedEvent.name,\n    signature: modifiedEvent.anonymous || !data.topics || data.topics.length === 0 || !data.topics[0] ? undefined : data.topics[0],\n    raw: {\n      data: data.data,\n      topics: data.topics\n    }\n  });\n};\nexports.decodeEventABI = decodeEventABI;\nconst encodeMethodABI = (abi, args, deployData) => {\n  const inputLength = Array.isArray(abi.inputs) ? abi.inputs.length : 0;\n  if (inputLength !== args.length) {\n    throw new web3_errors_1.Web3ContractError(`The number of arguments is not matching the methods required number. You need to pass ${inputLength} arguments.`);\n  }\n  const params = (0, web3_eth_abi_1.encodeParameters)(Array.isArray(abi.inputs) ? abi.inputs : [], args).replace('0x', '');\n  if ((0, web3_eth_abi_1.isAbiConstructorFragment)(abi)) {\n    if (!deployData) throw new web3_errors_1.Web3ContractError('The contract has no contract data option set. This is necessary to append the constructor parameters.');\n    if (!deployData.startsWith('0x')) {\n      return `0x${deployData}${params}`;\n    }\n    return `${deployData}${params}`;\n  }\n  return `${(0, web3_eth_abi_1.encodeFunctionSignature)(abi)}${params}`;\n};\nexports.encodeMethodABI = encodeMethodABI;\nconst decodeMethodReturn = (abi, returnValues) => {\n  // If it was constructor then we need to return contract address\n  if (abi.type === 'constructor') {\n    return returnValues;\n  }\n  if (!returnValues) {\n    // Using \"null\" value intentionally to match legacy behavior\n    // eslint-disable-next-line no-null/no-null\n    return null;\n  }\n  const value = returnValues.length >= 2 ? returnValues.slice(2) : returnValues;\n  if (!abi.outputs) {\n    // eslint-disable-next-line no-null/no-null\n    return null;\n  }\n  const result = (0, web3_eth_abi_1.decodeParameters)([...abi.outputs], value);\n  if (result.__length__ === 1) {\n    return result[0];\n  }\n  return result;\n};\nexports.decodeMethodReturn = decodeMethodReturn;","map":{"version":3,"names":["web3_utils_1","require","web3_types_1","web3_eth_abi_1","web3_eth_1","web3_errors_1","encodeEventABI","address","event","options","topics","filter","_a","opts","isNullish","fromBlock","format","blockSchema","properties","number","FMT_NUMBER","HEX","bytes","FMT_BYTES","toBlock","Array","isArray","anonymous","name","push","_b","signature","encodeEventSignature","jsonInterfaceMethodToString","inputs","input","indexed","value","map","v","encodeParameter","type","keccak256","length","toLowerCase","exports","decodeEventABI","data","jsonInterface","returnFormat","DEFAULT_RETURN_FORMAT","modifiedEvent","Object","assign","result","logSchema","matchedEvent","find","j","indexedInputs","_c","forEach","argTopics","_d","slice","returnValues","decodeLog","_e","undefined","raw","encodeMethodABI","abi","args","deployData","inputLength","Web3ContractError","params","encodeParameters","replace","isAbiConstructorFragment","startsWith","encodeFunctionSignature","decodeMethodReturn","outputs","decodeParameters","__length__"],"sources":["/Users/branko/Documents/Web3_FE_task/node_modules/web3-eth-contract/src/encoding.ts"],"sourcesContent":["ï»¿/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport { format, isNullish, keccak256 } from 'web3-utils';\n\nimport {\n\tAbiConstructorFragment,\n\tAbiEventFragment,\n\tAbiFunctionFragment,\n\tLogsInput,\n\tFilter,\n\tHexString,\n\tTopic,\n\tFMT_NUMBER,\n\tFMT_BYTES,\n\tDataFormat,\n\tDEFAULT_RETURN_FORMAT,\n} from 'web3-types';\n\nimport {\n\tdecodeLog,\n\tdecodeParameters,\n\tencodeEventSignature,\n\tencodeFunctionSignature,\n\tencodeParameter,\n\tencodeParameters,\n\tisAbiConstructorFragment,\n\tjsonInterfaceMethodToString,\n} from 'web3-eth-abi';\n\nimport { blockSchema, logSchema } from 'web3-eth';\n\nimport { Web3ContractError } from 'web3-errors';\n\n// eslint-disable-next-line import/no-cycle\nimport { ContractOptions, ContractAbiWithSignature, EventLog } from './types.js';\n\ntype Writeable<T> = { -readonly [P in keyof T]: T[P] };\nexport const encodeEventABI = (\n\t{ address }: ContractOptions,\n\tevent: AbiEventFragment & { signature: string },\n\toptions?: Filter,\n) => {\n\tconst topics = options?.topics;\n\tconst filter = options?.filter ?? {};\n\tconst opts: Writeable<Filter> = {};\n\n\tif (!isNullish(options?.fromBlock)) {\n\t\topts.fromBlock = format(blockSchema.properties.number, options?.fromBlock, {\n\t\t\tnumber: FMT_NUMBER.HEX,\n\t\t\tbytes: FMT_BYTES.HEX,\n\t\t});\n\t}\n\tif (!isNullish(options?.toBlock)) {\n\t\topts.toBlock = format(blockSchema.properties.number, options?.toBlock, {\n\t\t\tnumber: FMT_NUMBER.HEX,\n\t\t\tbytes: FMT_BYTES.HEX,\n\t\t});\n\t}\n\n\tif (topics && Array.isArray(topics)) {\n\t\topts.topics = [...topics] as Topic[];\n\t} else {\n\t\topts.topics = [];\n\t\t// add event signature\n\t\tif (event && !event.anonymous && event.name !== 'ALLEVENTS') {\n\t\t\topts.topics.push(\n\t\t\t\tevent.signature ?? encodeEventSignature(jsonInterfaceMethodToString(event)),\n\t\t\t);\n\t\t}\n\n\t\t// add event topics (indexed arguments)\n\t\tif (event.name !== 'ALLEVENTS' && event.inputs) {\n\t\t\tfor (const input of event.inputs) {\n\t\t\t\tif (!input.indexed) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst value = filter[input.name];\n\t\t\t\tif (!value) {\n\t\t\t\t\t// eslint-disable-next-line no-null/no-null\n\t\t\t\t\topts.topics.push(null);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// TODO: https://github.com/ethereum/web3.js/issues/344\n\t\t\t\t// TODO: deal properly with components\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\topts.topics.push(value.map(v => encodeParameter(input.type, v)));\n\t\t\t\t} else if (input.type === 'string') {\n\t\t\t\t\topts.topics.push(keccak256(value as string));\n\t\t\t\t} else {\n\t\t\t\t\topts.topics.push(encodeParameter(input.type, value));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!opts.topics.length) delete opts.topics;\n\n\tif (address) {\n\t\topts.address = address.toLowerCase();\n\t}\n\n\treturn opts;\n};\n\nexport const decodeEventABI = (\n\tevent: AbiEventFragment & { signature: string },\n\tdata: LogsInput,\n\tjsonInterface: ContractAbiWithSignature,\n\treturnFormat: DataFormat = DEFAULT_RETURN_FORMAT,\n): EventLog => {\n\tlet modifiedEvent = { ...event };\n\n\tconst result = format(logSchema, data, returnFormat);\n\n\t// if allEvents get the right event\n\tif (modifiedEvent.name === 'ALLEVENTS') {\n\t\tconst matchedEvent = jsonInterface.find(j => j.signature === data.topics[0]);\n\t\tif (matchedEvent) {\n\t\t\tmodifiedEvent = matchedEvent as AbiEventFragment & { signature: string };\n\t\t} else {\n\t\t\tmodifiedEvent = { anonymous: true } as unknown as AbiEventFragment & {\n\t\t\t\tsignature: string;\n\t\t\t};\n\t\t}\n\t}\n\n\t// create empty inputs if none are present (e.g. anonymous events on allEvents)\n\tmodifiedEvent.inputs = modifiedEvent.inputs ?? event.inputs ?? [];\n\n\t// Handle case where an event signature shadows the current ABI with non-identical\n\t// arg indexing. If # of topics doesn't match, event is anon.\n\tif (!modifiedEvent.anonymous) {\n\t\tlet indexedInputs = 0;\n\t\t(modifiedEvent.inputs ?? []).forEach(input => {\n\t\t\tif (input.indexed) {\n\t\t\t\tindexedInputs += 1;\n\t\t\t}\n\t\t});\n\n\t\tif (indexedInputs > 0 && data?.topics && data?.topics.length !== indexedInputs + 1) {\n\t\t\t// checks if event is anonymous\n\t\t\tmodifiedEvent = {\n\t\t\t\t...modifiedEvent,\n\t\t\t\tanonymous: true,\n\t\t\t\tinputs: [],\n\t\t\t};\n\t\t}\n\t}\n\n\tconst argTopics = modifiedEvent.anonymous ? data.topics : (data.topics ?? []).slice(1);\n\treturn {\n\t\t...result,\n\t\treturnValues: decodeLog([...(modifiedEvent.inputs ?? [])], data.data, argTopics),\n\t\tevent: modifiedEvent.name,\n\t\tsignature:\n\t\t\tmodifiedEvent.anonymous || !data.topics || data.topics.length === 0 || !data.topics[0]\n\t\t\t\t? undefined\n\t\t\t\t: data.topics[0],\n\n\t\traw: {\n\t\t\tdata: data.data,\n\t\t\ttopics: data.topics,\n\t\t},\n\t};\n};\n\nexport const encodeMethodABI = (\n\tabi: AbiFunctionFragment | AbiConstructorFragment,\n\targs: unknown[],\n\tdeployData?: HexString,\n) => {\n\tconst inputLength = Array.isArray(abi.inputs) ? abi.inputs.length : 0;\n\n\tif (inputLength !== args.length) {\n\t\tthrow new Web3ContractError(\n\t\t\t`The number of arguments is not matching the methods required number. You need to pass ${inputLength} arguments.`,\n\t\t);\n\t}\n\n\tconst params = encodeParameters(Array.isArray(abi.inputs) ? abi.inputs : [], args).replace(\n\t\t'0x',\n\t\t'',\n\t);\n\n\tif (isAbiConstructorFragment(abi)) {\n\t\tif (!deployData)\n\t\t\tthrow new Web3ContractError(\n\t\t\t\t'The contract has no contract data option set. This is necessary to append the constructor parameters.',\n\t\t\t);\n\n\t\tif (!deployData.startsWith('0x')) {\n\t\t\treturn `0x${deployData}${params}`;\n\t\t}\n\n\t\treturn `${deployData}${params}`;\n\t}\n\n\treturn `${encodeFunctionSignature(abi)}${params}`;\n};\n\nexport const decodeMethodReturn = (abi: AbiFunctionFragment, returnValues?: HexString) => {\n\t// If it was constructor then we need to return contract address\n\tif (abi.type === 'constructor') {\n\t\treturn returnValues;\n\t}\n\n\tif (!returnValues) {\n\t\t// Using \"null\" value intentionally to match legacy behavior\n\t\t// eslint-disable-next-line no-null/no-null\n\t\treturn null;\n\t}\n\n\tconst value = returnValues.length >= 2 ? returnValues.slice(2) : returnValues;\n\tif (!abi.outputs) {\n\t\t// eslint-disable-next-line no-null/no-null\n\t\treturn null;\n\t}\n\tconst result = decodeParameters([...abi.outputs], value);\n\n\tif (result.__length__ === 1) {\n\t\treturn result[0];\n\t}\n\n\treturn result;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}